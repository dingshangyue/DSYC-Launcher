2026-01-27T08:48:58.0636894Z Current runner version: '2.331.0'
2026-01-27T08:48:58.0663435Z ##[group]Runner Image Provisioner
2026-01-27T08:48:58.0664310Z Hosted Compute Agent
2026-01-27T08:48:58.0665012Z Version: 20260115.477
2026-01-27T08:48:58.0665606Z Commit: 4b342d620503cbe250a3154040964899ea7c9b00
2026-01-27T08:48:58.0666269Z Build Date: 2026-01-15T22:32:41Z
2026-01-27T08:48:58.0667025Z Worker ID: {3c0d40d4-ca92-4dc6-8581-28bfe9f595dd}
2026-01-27T08:48:58.0667687Z Azure Region: westus
2026-01-27T08:48:58.0668443Z ##[endgroup]
2026-01-27T08:48:58.0669962Z ##[group]Operating System
2026-01-27T08:48:58.0670595Z Ubuntu
2026-01-27T08:48:58.0671033Z 24.04.3
2026-01-27T08:48:58.0671589Z LTS
2026-01-27T08:48:58.0672124Z ##[endgroup]
2026-01-27T08:48:58.0672619Z ##[group]Runner Image
2026-01-27T08:48:58.0673263Z Image: ubuntu-24.04
2026-01-27T08:48:58.0673801Z Version: 20260119.4.1
2026-01-27T08:48:58.0674973Z Included Software: https://github.com/actions/runner-images/blob/ubuntu24/20260119.4/images/ubuntu/Ubuntu2404-Readme.md
2026-01-27T08:48:58.0676545Z Image Release: https://github.com/actions/runner-images/releases/tag/ubuntu24%2F20260119.4
2026-01-27T08:48:58.0677470Z ##[endgroup]
2026-01-27T08:48:58.0678760Z ##[group]GITHUB_TOKEN Permissions
2026-01-27T08:48:58.0680930Z Contents: read
2026-01-27T08:48:58.0681473Z Metadata: read
2026-01-27T08:48:58.0682081Z ##[endgroup]
2026-01-27T08:48:58.0684304Z Secret source: Actions
2026-01-27T08:48:58.0684979Z Prepare workflow directory
2026-01-27T08:48:58.1022771Z Prepare all required actions
2026-01-27T08:48:58.1070089Z Getting action download info
2026-01-27T08:48:58.6163363Z Download action repository 'actions/checkout@v4' (SHA:34e114876b0b11c390a56381ad16ebd13914f8d5)
2026-01-27T08:48:58.7360600Z Download action repository 'actions/setup-node@v4' (SHA:49933ea5288caeca8642d1e84afbd3f7d6820020)
2026-01-27T08:48:58.8327111Z Download action repository 'actions-rs/toolchain@v1' (SHA:16499b5e05bf2e26879000db0c1d13f7e13fa3af)
2026-01-27T08:48:59.4245351Z Complete job name: Lint
2026-01-27T08:48:59.4939120Z ##[group]Run actions/checkout@v4
2026-01-27T08:48:59.4940005Z with:
2026-01-27T08:48:59.4940436Z   repository: dingshangyue/DSYC-Launcher
2026-01-27T08:48:59.4941162Z   token: ***
2026-01-27T08:48:59.4941545Z   ssh-strict: true
2026-01-27T08:48:59.4941938Z   ssh-user: git
2026-01-27T08:48:59.4942346Z   persist-credentials: true
2026-01-27T08:48:59.4942789Z   clean: true
2026-01-27T08:48:59.4943191Z   sparse-checkout-cone-mode: true
2026-01-27T08:48:59.4943660Z   fetch-depth: 1
2026-01-27T08:48:59.4944055Z   fetch-tags: false
2026-01-27T08:48:59.4944450Z   show-progress: true
2026-01-27T08:48:59.4944847Z   lfs: false
2026-01-27T08:48:59.4945220Z   submodules: false
2026-01-27T08:48:59.4945625Z   set-safe-directory: true
2026-01-27T08:48:59.4946268Z ##[endgroup]
2026-01-27T08:48:59.6058191Z Syncing repository: dingshangyue/DSYC-Launcher
2026-01-27T08:48:59.6061455Z ##[group]Getting Git version info
2026-01-27T08:48:59.6062814Z Working directory is '/home/runner/work/DSYC-Launcher/DSYC-Launcher'
2026-01-27T08:48:59.6064919Z [command]/usr/bin/git version
2026-01-27T08:48:59.6157674Z git version 2.52.0
2026-01-27T08:48:59.6185807Z ##[endgroup]
2026-01-27T08:48:59.6201266Z Temporarily overriding HOME='/home/runner/work/_temp/5c4c3f7e-88c8-4b4e-ae8b-8ed35075a86c' before making global git config changes
2026-01-27T08:48:59.6214771Z Adding repository directory to the temporary git global config as a safe directory
2026-01-27T08:48:59.6215961Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/DSYC-Launcher/DSYC-Launcher
2026-01-27T08:48:59.6259379Z Deleting the contents of '/home/runner/work/DSYC-Launcher/DSYC-Launcher'
2026-01-27T08:48:59.6263857Z ##[group]Initializing the repository
2026-01-27T08:48:59.6269031Z [command]/usr/bin/git init /home/runner/work/DSYC-Launcher/DSYC-Launcher
2026-01-27T08:48:59.6392309Z hint: Using 'master' as the name for the initial branch. This default branch name
2026-01-27T08:48:59.6393931Z hint: will change to "main" in Git 3.0. To configure the initial branch name
2026-01-27T08:48:59.6395362Z hint: to use in all of your new repositories, which will suppress this warning,
2026-01-27T08:48:59.6396573Z hint: call:
2026-01-27T08:48:59.6396961Z hint:
2026-01-27T08:48:59.6398293Z hint: 	git config --global init.defaultBranch <name>
2026-01-27T08:48:59.6399328Z hint:
2026-01-27T08:48:59.6400316Z hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and
2026-01-27T08:48:59.6401915Z hint: 'development'. The just-created branch can be renamed via this command:
2026-01-27T08:48:59.6403187Z hint:
2026-01-27T08:48:59.6403891Z hint: 	git branch -m <name>
2026-01-27T08:48:59.6404673Z hint:
2026-01-27T08:48:59.6405658Z hint: Disable this message with "git config set advice.defaultBranchName false"
2026-01-27T08:48:59.6407363Z Initialized empty Git repository in /home/runner/work/DSYC-Launcher/DSYC-Launcher/.git/
2026-01-27T08:48:59.6411649Z [command]/usr/bin/git remote add origin https://github.com/dingshangyue/DSYC-Launcher
2026-01-27T08:48:59.6448760Z ##[endgroup]
2026-01-27T08:48:59.6449969Z ##[group]Disabling automatic garbage collection
2026-01-27T08:48:59.6454010Z [command]/usr/bin/git config --local gc.auto 0
2026-01-27T08:48:59.6483567Z ##[endgroup]
2026-01-27T08:48:59.6484759Z ##[group]Setting up auth
2026-01-27T08:48:59.6491601Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-27T08:48:59.6523325Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-27T08:48:59.6900418Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-27T08:48:59.6932854Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-27T08:48:59.7158916Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-27T08:48:59.7189545Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-27T08:48:59.7433518Z [command]/usr/bin/git config --local http.https://github.com/.extraheader AUTHORIZATION: basic ***
2026-01-27T08:48:59.7470522Z ##[endgroup]
2026-01-27T08:48:59.7471813Z ##[group]Fetching the repository
2026-01-27T08:48:59.7480242Z [command]/usr/bin/git -c protocol.version=2 fetch --no-tags --prune --no-recurse-submodules --depth=1 origin +16d9cf4eb64a8cae1d62f101ecc41d5f0a2b34e8:refs/remotes/origin/main
2026-01-27T08:49:00.9003564Z From https://github.com/dingshangyue/DSYC-Launcher
2026-01-27T08:49:00.9005310Z  * [new ref]         16d9cf4eb64a8cae1d62f101ecc41d5f0a2b34e8 -> origin/main
2026-01-27T08:49:00.9040216Z ##[endgroup]
2026-01-27T08:49:00.9041390Z ##[group]Determining the checkout info
2026-01-27T08:49:00.9042890Z ##[endgroup]
2026-01-27T08:49:00.9047605Z [command]/usr/bin/git sparse-checkout disable
2026-01-27T08:49:00.9092812Z [command]/usr/bin/git config --local --unset-all extensions.worktreeConfig
2026-01-27T08:49:00.9119585Z ##[group]Checking out the ref
2026-01-27T08:49:00.9123423Z [command]/usr/bin/git checkout --progress --force -B main refs/remotes/origin/main
2026-01-27T08:49:01.0972743Z Switched to a new branch 'main'
2026-01-27T08:49:01.0974026Z branch 'main' set up to track 'origin/main'.
2026-01-27T08:49:01.0991242Z ##[endgroup]
2026-01-27T08:49:01.1037150Z [command]/usr/bin/git log -1 --format=%H
2026-01-27T08:49:01.1063142Z 16d9cf4eb64a8cae1d62f101ecc41d5f0a2b34e8
2026-01-27T08:49:01.1352451Z ##[group]Run actions/setup-node@v4
2026-01-27T08:49:01.1353244Z with:
2026-01-27T08:49:01.1353859Z   node-version: lts/*
2026-01-27T08:49:01.1354507Z   always-auth: false
2026-01-27T08:49:01.1355144Z   check-latest: false
2026-01-27T08:49:01.1355984Z   token: ***
2026-01-27T08:49:01.1356595Z ##[endgroup]
2026-01-27T08:49:01.3101663Z Attempt to resolve LTS alias from manifest...
2026-01-27T08:49:02.4229331Z Found in cache @ /opt/hostedtoolcache/node/24.13.0/x64
2026-01-27T08:49:02.4234992Z ##[group]Environment details
2026-01-27T08:49:04.6213762Z node: v24.13.0
2026-01-27T08:49:04.6214314Z npm: 11.6.2
2026-01-27T08:49:04.6214714Z yarn: 1.22.22
2026-01-27T08:49:04.6215848Z ##[endgroup]
2026-01-27T08:49:04.6357564Z ##[group]Run npm install
2026-01-27T08:49:04.6358247Z [36;1mnpm install[0m
2026-01-27T08:49:04.6401068Z shell: /usr/bin/bash -e {0}
2026-01-27T08:49:04.6401349Z ##[endgroup]
2026-01-27T08:49:10.3090974Z npm warn deprecated string-similarity@4.0.4: Package no longer supported. Contact Support at https://www.npmjs.com/support for more info.
2026-01-27T08:49:10.8459644Z npm warn deprecated rimraf@3.0.2: Rimraf versions prior to v4 are no longer supported
2026-01-27T08:49:14.7846432Z npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
2026-01-27T08:49:15.3210197Z npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
2026-01-27T08:49:16.7327307Z npm warn deprecated eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.
2026-01-27T08:49:20.1671946Z npm warn deprecated @humanwhocodes/object-schema@2.0.3: Use @eslint/object-schema instead
2026-01-27T08:49:20.2039408Z npm warn deprecated @humanwhocodes/config-array@0.13.0: Use @eslint/config-array instead
2026-01-27T08:49:23.1296550Z 
2026-01-27T08:49:23.1297357Z > dsyclauncher@0.9.8 prepare
2026-01-27T08:49:23.1298136Z > husky
2026-01-27T08:49:23.1298345Z 
2026-01-27T08:49:23.1942527Z 
2026-01-27T08:49:23.1943898Z added 634 packages, and audited 635 packages in 18s
2026-01-27T08:49:23.1944405Z 
2026-01-27T08:49:23.1948577Z 259 packages are looking for funding
2026-01-27T08:49:23.1949986Z   run `npm fund` for details
2026-01-27T08:49:23.1961476Z 
2026-01-27T08:49:23.1961874Z found 0 vulnerabilities
2026-01-27T08:49:23.2755908Z ##[group]Run npx eslint 'src/**/*.{js,jsx,ts,tsx}' --no-fix --max-warnings=0
2026-01-27T08:49:23.2829242Z [36;1mnpx eslint 'src/**/*.{js,jsx,ts,tsx}' --no-fix --max-warnings=0[0m
2026-01-27T08:49:23.2863225Z shell: /usr/bin/bash -e {0}
2026-01-27T08:49:23.2863470Z ##[endgroup]
2026-01-27T08:49:30.4438903Z ##[group]Run actions-rs/toolchain@v1
2026-01-27T08:49:30.4439230Z with:
2026-01-27T08:49:30.4439402Z   profile: minimal
2026-01-27T08:49:30.4439590Z   toolchain: stable
2026-01-27T08:49:30.4439766Z   override: true
2026-01-27T08:49:30.4439957Z   components: rustfmt
2026-01-27T08:49:30.4440154Z   default: false
2026-01-27T08:49:30.4440343Z ##[endgroup]
2026-01-27T08:49:30.5438574Z [command]/home/runner/.cargo/bin/rustup show
2026-01-27T08:49:30.6387156Z Default host: x86_64-unknown-linux-gnu
2026-01-27T08:49:30.6388164Z rustup home:  /home/runner/.rustup
2026-01-27T08:49:30.6388503Z 
2026-01-27T08:49:30.7100013Z installed toolchains
2026-01-27T08:49:30.7100756Z --------------------
2026-01-27T08:49:30.7102887Z stable-x86_64-unknown-linux-gnu (active, default)
2026-01-27T08:49:30.7103450Z 
2026-01-27T08:49:30.7103815Z active toolchain
2026-01-27T08:49:30.7104164Z ----------------
2026-01-27T08:49:30.7107704Z name: stable-x86_64-unknown-linux-gnu
2026-01-27T08:49:30.7108735Z active because: it's the default toolchain
2026-01-27T08:49:30.7109321Z installed targets:
2026-01-27T08:49:30.7109778Z   x86_64-unknown-linux-gnu
2026-01-27T08:49:30.7161290Z [command]/home/runner/.cargo/bin/rustup -V
2026-01-27T08:49:30.7219047Z rustup 1.28.2 (e4f3ad6f8 2025-04-28)
2026-01-27T08:49:30.7268570Z info: This is the version for the rustup toolchain manager, not the rustc compiler.
2026-01-27T08:49:30.8937054Z info: The currently active `rustc` version is `rustc 1.92.0 (ded5c06cf 2025-12-08)`
2026-01-27T08:49:30.8973283Z Installed rustup 1.28.2 support profiles
2026-01-27T08:49:30.8977606Z [command]/home/runner/.cargo/bin/rustup -V
2026-01-27T08:49:30.9033081Z rustup 1.28.2 (e4f3ad6f8 2025-04-28)
2026-01-27T08:49:30.9034728Z info: This is the version for the rustup toolchain manager, not the rustc compiler.
2026-01-27T08:49:30.9522595Z info: The currently active `rustc` version is `rustc 1.92.0 (ded5c06cf 2025-12-08)`
2026-01-27T08:49:30.9545280Z Installed rustup 1.28.2 support components
2026-01-27T08:49:30.9550133Z [command]/home/runner/.cargo/bin/rustup set profile minimal
2026-01-27T08:49:30.9756872Z info: profile set to 'minimal'
2026-01-27T08:49:30.9775181Z [command]/home/runner/.cargo/bin/rustup toolchain install stable --component rustfmt
2026-01-27T08:49:31.0663979Z info: syncing channel updates for 'stable-x86_64-unknown-linux-gnu'
2026-01-27T08:49:31.1771711Z info: latest update on 2026-01-22, rust version 1.93.0 (254b59607 2026-01-19)
2026-01-27T08:49:31.2209578Z info: downloading component 'rustfmt'
2026-01-27T08:49:31.2410441Z info: downloading component 'clippy'
2026-01-27T08:49:31.2702001Z info: downloading component 'cargo'
2026-01-27T08:49:31.3183024Z info: downloading component 'rust-std'
2026-01-27T08:49:31.4176766Z info: downloading component 'rustc'
2026-01-27T08:49:31.5982576Z info: removing previous version of component 'clippy'
2026-01-27T08:49:31.6008737Z info: removing previous version of component 'rustfmt'
2026-01-27T08:49:31.6022825Z info: removing previous version of component 'cargo'
2026-01-27T08:49:31.6128054Z info: removing previous version of component 'rust-std'
2026-01-27T08:49:31.6160429Z info: removing previous version of component 'rustc'
2026-01-27T08:49:31.6253144Z info: installing component 'rustfmt'
2026-01-27T08:49:31.8601908Z info: installing component 'clippy'
2026-01-27T08:49:32.2368461Z info: installing component 'cargo'
2026-01-27T08:49:32.9482290Z info: installing component 'rust-std'
2026-01-27T08:49:34.8586399Z info: installing component 'rustc'
2026-01-27T08:49:39.5813369Z 
2026-01-27T08:49:39.5904566Z   stable-x86_64-unknown-linux-gnu updated - rustc 1.93.0 (254b59607 2026-01-19) (from rustc 1.92.0 (ded5c06cf 2025-12-08))
2026-01-27T08:49:39.5905202Z 
2026-01-27T08:49:39.5932728Z [command]/home/runner/.cargo/bin/rustup override set stable
2026-01-27T08:49:39.5998754Z info: override toolchain for '/home/runner/work/DSYC-Launcher/DSYC-Launcher' set to 'stable-x86_64-unknown-linux-gnu'
2026-01-27T08:49:39.6016509Z ##[group]Gathering installed versions
2026-01-27T08:49:39.6027007Z [command]/home/runner/.cargo/bin/rustc -V
2026-01-27T08:49:39.6465176Z rustc 1.93.0 (254b59607 2026-01-19)
2026-01-27T08:49:39.6500255Z ##[warning]The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/
2026-01-27T08:49:39.6511209Z ##[warning]The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/
2026-01-27T08:49:39.6512824Z [command]/home/runner/.cargo/bin/cargo -V
2026-01-27T08:49:39.6906647Z cargo 1.93.0 (083ac5135 2025-12-15)
2026-01-27T08:49:39.6919514Z ##[warning]The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/
2026-01-27T08:49:39.6929898Z [command]/home/runner/.cargo/bin/rustup -V
2026-01-27T08:49:39.6985547Z rustup 1.28.2 (e4f3ad6f8 2025-04-28)
2026-01-27T08:49:39.6986445Z info: This is the version for the rustup toolchain manager, not the rustc compiler.
2026-01-27T08:49:39.7377045Z info: The currently active `rustc` version is `rustc 1.93.0 (254b59607 2026-01-19)`
2026-01-27T08:49:39.7402802Z ##[warning]The `set-output` command is deprecated and will be disabled soon. Please upgrade to using Environment Files. For more information see: https://github.blog/changelog/2022-10-11-github-actions-deprecating-save-state-and-set-output-commands/
2026-01-27T08:49:39.7404944Z ##[endgroup]
2026-01-27T08:49:39.7482682Z ##[group]Run find src-tauri/src -name '*.rs' | xargs rustfmt --check
2026-01-27T08:49:39.7483155Z [36;1mfind src-tauri/src -name '*.rs' | xargs rustfmt --check[0m
2026-01-27T08:49:39.7515684Z shell: /usr/bin/bash -e {0}
2026-01-27T08:49:39.7515925Z ##[endgroup]
2026-01-27T08:49:39.8558209Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/commands.rs:53:
2026-01-27T08:49:39.8559000Z  }
2026-01-27T08:49:39.8559202Z  
2026-01-27T08:49:39.8559569Z  #[tauri::command]
2026-01-27T08:49:39.8560359Z -pub async fn add_player_offline(app: AppHandle, username: String, uuid: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8561117Z +pub async fn add_player_offline(
2026-01-27T08:49:39.8561421Z +  app: AppHandle,
2026-01-27T08:49:39.8561660Z +  username: String,
2026-01-27T08:49:39.8561878Z +  uuid: String,
2026-01-27T08:49:39.8562152Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8562593Z    let new_player = offline::login(&app, username, uuid).await?;
2026-01-27T08:49:39.8563024Z  
2026-01-27T08:49:39.8563326Z    let account_binding = app.state::<Mutex<AccountInfo>>();
2026-01-27T08:49:39.8575197Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:1:
2026-01-27T08:49:39.8576021Z  pub static AUTHLIB_INJECTOR_JAR_NAME: &str = "authlib-injector.jar";
2026-01-27T08:49:39.8576517Z -pub static PRESET_AUTH_SERVERS: [&str; 1] = [
2026-01-27T08:49:39.8576920Z -  "https://littleskin.cn/api/yggdrasil",
2026-01-27T08:49:39.8577210Z -];
2026-01-27T08:49:39.8577665Z +pub static PRESET_AUTH_SERVERS: [&str; 1] = ["https://littleskin.cn/api/yggdrasil"];
2026-01-27T08:49:39.8578351Z  pub static SCOPE: &str =
2026-01-27T08:49:39.8578818Z    "openid offline_access Yggdrasil.PlayerProfiles.Select Yggdrasil.Server.Join";
2026-01-27T08:49:39.8579259Z  
2026-01-27T08:49:39.8579893Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:8:
2026-01-27T08:49:39.8580586Z -pub static CLIENT_IDS: [(&str, &str); 1] = [
2026-01-27T08:49:39.8580908Z -  ("littleskin.cn", "1014"),
2026-01-27T08:49:39.8581151Z -];
2026-01-27T08:49:39.8581529Z +pub static CLIENT_IDS: [(&str, &str); 1] = [("littleskin.cn", "1014")];
2026-01-27T08:49:39.8581904Z  
2026-01-27T08:49:39.8637004Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/import/hmcl.rs:64:
2026-01-27T08:49:39.8637754Z    ThirdParty(HmclThirdPartyAccount),
2026-01-27T08:49:39.8638326Z  }
2026-01-27T08:49:39.8638515Z  
2026-01-27T08:49:39.8639187Z -async fn offline_to_player(app: &AppHandle, acc: &HmclOfflineAccount) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8639860Z +async fn offline_to_player(
2026-01-27T08:49:39.8640158Z +  app: &AppHandle,
2026-01-27T08:49:39.8640436Z +  acc: &HmclOfflineAccount,
2026-01-27T08:49:39.8640820Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8641507Z    let uuid = uuid::Uuid::parse_str(&acc.uuid).map_err(|_| AccountError::ParseError)?;
2026-01-27T08:49:39.8642110Z    let textures = load_preset_skin(app, PresetRole::Steve)?;
2026-01-27T08:49:39.8642467Z    Ok(
2026-01-27T08:49:39.8661249Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:75:
2026-01-27T08:49:39.8662496Z    Ok(response["Token"].as_str().unwrap_or("").to_string())
2026-01-27T08:49:39.8662856Z  }
2026-01-27T08:49:39.8663035Z  
2026-01-27T08:49:39.8663629Z -async fn fetch_xsts_token(app: &AppHandle, xbl_token: String) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:39.8664215Z +async fn fetch_xsts_token(
2026-01-27T08:49:39.8664494Z +  app: &AppHandle,
2026-01-27T08:49:39.8664735Z +  xbl_token: String,
2026-01-27T08:49:39.8665067Z +) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:39.8665489Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:39.8665793Z  
2026-01-27T08:49:39.8665992Z    let response = client
2026-01-27T08:49:39.8667345Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:206:
2026-01-27T08:49:39.8668198Z    )
2026-01-27T08:49:39.8668400Z  }
2026-01-27T08:49:39.8668570Z  
2026-01-27T08:49:39.8669184Z -pub async fn login(app: &AppHandle, auth_info: DeviceAuthResponseInfo) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8669787Z +pub async fn login(
2026-01-27T08:49:39.8670080Z +  app: &AppHandle,
2026-01-27T08:49:39.8670497Z +  auth_info: DeviceAuthResponseInfo,
2026-01-27T08:49:39.8670906Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8671305Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:39.8671703Z    let sender = client.post(OAUTH_TOKEN_ENDPOINT).form(&[
2026-01-27T08:49:39.8672063Z      ("client_id", CLIENT_ID),
2026-01-27T08:49:39.8675260Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:11:
2026-01-27T08:49:39.8676135Z  use tauri::AppHandle;
2026-01-27T08:49:39.8676449Z  use uuid::Uuid;
2026-01-27T08:49:39.8676634Z  
2026-01-27T08:49:39.8677185Z -pub fn load_preset_skin(app: &AppHandle, preset_role: PresetRole) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:39.8677728Z +pub fn load_preset_skin(
2026-01-27T08:49:39.8678155Z +  app: &AppHandle,
2026-01-27T08:49:39.8678391Z +  preset_role: PresetRole,
2026-01-27T08:49:39.8678696Z +) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:39.8679290Z    let texture_path = get_app_resource_filepath(app, &format!("assets/skins/{}.png", preset_role))
2026-01-27T08:49:39.8679853Z      .map_err(|_| AccountError::TextureError)?;
2026-01-27T08:49:39.8680142Z  
2026-01-27T08:49:39.8680694Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:29:
2026-01-27T08:49:39.8681215Z    }])
2026-01-27T08:49:39.8681386Z  }
2026-01-27T08:49:39.8681546Z  
2026-01-27T08:49:39.8682081Z -pub async fn login(app: &AppHandle, username: String, raw_uuid: String) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8682568Z +pub async fn login(
2026-01-27T08:49:39.8682772Z +  app: &AppHandle,
2026-01-27T08:49:39.8682967Z +  username: String,
2026-01-27T08:49:39.8683158Z +  raw_uuid: String,
2026-01-27T08:49:39.8683392Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:39.8683750Z    let name_with_prefix = format!("OfflinePlayer:{}", username);
2026-01-27T08:49:39.8684147Z    let uuid = if let Ok(id) = Uuid::parse_str(&raw_uuid) {
2026-01-27T08:49:39.8684428Z      id
2026-01-27T08:49:39.8861745Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:194:
2026-01-27T08:49:39.8862473Z  }
2026-01-27T08:49:39.8862692Z  
2026-01-27T08:49:39.8862969Z  #[tauri::command]
2026-01-27T08:49:39.8863785Z -pub async fn reset_instance_game_config(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8864636Z +pub async fn reset_instance_game_config(
2026-01-27T08:49:39.8865041Z +  app: AppHandle,
2026-01-27T08:49:39.8865365Z +  instance_id: String,
2026-01-27T08:49:39.8865734Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8866077Z    let instance = {
2026-01-27T08:49:39.8866547Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:39.8867107Z      let mut state = binding.lock().unwrap();
2026-01-27T08:49:39.8868161Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:844:
2026-01-27T08:49:39.8868811Z  }
2026-01-27T08:49:39.8869025Z  
2026-01-27T08:49:39.8869252Z  #[tauri::command]
2026-01-27T08:49:39.8870047Z -pub fn create_launch_desktop_shortcut(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8870858Z +pub fn create_launch_desktop_shortcut(
2026-01-27T08:49:39.8871255Z +  app: AppHandle,
2026-01-27T08:49:39.8871551Z +  instance_id: String,
2026-01-27T08:49:39.8871903Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8872331Z    let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:39.8873053Z    let state = binding
2026-01-27T08:49:39.8873277Z      .lock()
2026-01-27T08:49:39.8873984Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:1065:
2026-01-27T08:49:39.8874506Z  }
2026-01-27T08:49:39.8874680Z  
2026-01-27T08:49:39.8874904Z  #[tauri::command]
2026-01-27T08:49:39.8875525Z -pub async fn finish_mod_loader_install(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8876177Z +pub async fn finish_mod_loader_install(
2026-01-27T08:49:39.8876493Z +  app: AppHandle,
2026-01-27T08:49:39.8876735Z +  instance_id: String,
2026-01-27T08:49:39.8877027Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.8877291Z    let instance = {
2026-01-27T08:49:39.8877662Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:39.8878212Z      let state = binding.lock()?;
2026-01-27T08:49:39.8903338Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:410:
2026-01-27T08:49:39.8904372Z    (game_version, loader_version, loader_type, None)
2026-01-27T08:49:39.8904727Z  }
2026-01-27T08:49:39.8904901Z  
2026-01-27T08:49:39.8905518Z -fn rules_is_allowed(rules: &Vec<InstructionRule>, feature: &FeaturesInfo) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:39.8906146Z +fn rules_is_allowed(
2026-01-27T08:49:39.8906449Z +  rules: &Vec<InstructionRule>,
2026-01-27T08:49:39.8906758Z +  feature: &FeaturesInfo,
2026-01-27T08:49:39.8907067Z +) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:39.8907373Z    let mut weak_allowed = true;
2026-01-27T08:49:39.8907644Z    for rule in rules {
2026-01-27T08:49:39.8908196Z      let (allow, strong) = rule.is_allowed(feature)?;
2026-01-27T08:49:39.8908981Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:466:
2026-01-27T08:49:39.8909570Z    app: &AppHandle,
2026-01-27T08:49:39.8910063Z  ) -> DSYCLauncherResult<HashMap<String, HashMap<String, Option<LibrariesValue>>>> {
2026-01-27T08:49:39.8910761Z    let path = get_app_resource_filepath(app, "assets/game/natives.json")?;
2026-01-27T08:49:39.8911186Z -  let txt =
2026-01-27T08:49:39.8911792Z -    fs::read_to_string(&path).map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:39.8912362Z +  let txt = fs::read_to_string(&path)
2026-01-27T08:49:39.8912798Z +    .map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:39.8913394Z    let map: HashMap<String, HashMap<String, Option<LibrariesValue>>> = serde_json::from_str(&txt)
2026-01-27T08:49:39.8913977Z      .map_err(|e| DSYCLauncherError(format!("parse natives.json failed: {e}")))?;
2026-01-27T08:49:39.8914334Z    Ok(map)
2026-01-27T08:49:39.8940112Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:43:
2026-01-27T08:49:39.8941044Z  
2026-01-27T08:49:39.8941318Z    let int_path = meta["intermediary"]["maven"]
2026-01-27T08:49:39.8941642Z      .as_str()
2026-01-27T08:49:39.8942129Z -    .ok_or(DSYCLauncherError("meta missing intermediary maven".to_string()))?;
2026-01-27T08:49:39.8942663Z +    .ok_or(DSYCLauncherError(
2026-01-27T08:49:39.8943065Z +      "meta missing intermediary maven".to_string(),
2026-01-27T08:49:39.8943392Z +    ))?;
2026-01-27T08:49:39.8943575Z  
2026-01-27T08:49:39.8943892Z    let main_class = meta["launcherMeta"]["mainClass"]["client"]
2026-01-27T08:49:39.8944275Z      .as_str()
2026-01-27T08:49:39.8944912Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:136:
2026-01-27T08:49:39.8945524Z        .and_then(|s| s.to_str())
2026-01-27T08:49:39.8945805Z        .unwrap_or_default()
2026-01-27T08:49:39.8946063Z        .to_string();
2026-01-27T08:49:39.8946671Z -    fs::remove_file(&p).map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:39.8947237Z +    fs::remove_file(&p)
2026-01-27T08:49:39.8947751Z +      .map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:39.8948742Z    }
2026-01-27T08:49:39.8948923Z  
2026-01-27T08:49:39.8949238Z    Ok(())
2026-01-27T08:49:39.9090317Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/misc.rs:90:
2026-01-27T08:49:39.9091442Z    get_instance_subdir_paths(app, instance, &[directory_type]).and_then(|mut paths| paths.pop())
2026-01-27T08:49:39.9092108Z  }
2026-01-27T08:49:39.9092326Z  
2026-01-27T08:49:39.9093081Z -pub fn unify_instance_name(src_version_path: &PathBuf, tgt_name: &String) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:39.9093856Z +pub fn unify_instance_name(
2026-01-27T08:49:39.9094253Z +  src_version_path: &PathBuf,
2026-01-27T08:49:39.9094597Z +  tgt_name: &String,
2026-01-27T08:49:39.9094968Z +) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:39.9095482Z    if !sanitize_filename::is_sanitized(tgt_name) {
2026-01-27T08:49:39.9096033Z      return Err(InstanceError::InvalidNameError.into());
2026-01-27T08:49:39.9096457Z    }
2026-01-27T08:49:39.9162481Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/modpack/curseforge.rs:150:
2026-01-27T08:49:39.9163212Z        let project_id = file.project_id;
2026-01-27T08:49:39.9163513Z  
2026-01-27T08:49:39.9163701Z        async move {
2026-01-27T08:49:39.9164204Z -        let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:39.9164834Z -          .map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:39.9165242Z +        let curseforge_api_key =
2026-01-27T08:49:39.9165865Z +          env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:39.9166542Z  
2026-01-27T08:49:39.9166852Z          let class_id = {
2026-01-27T08:49:39.9167158Z            let project_resp = client
2026-01-27T08:49:39.9249484Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:73:
2026-01-27T08:49:39.9250342Z            valid_logo_file: None,
2026-01-27T08:49:39.9250651Z          })
2026-01-27T08:49:39.9250860Z        } else {
2026-01-27T08:49:39.9251352Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:39.9251895Z +        Err(DSYCLauncherError(
2026-01-27T08:49:39.9252351Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:39.9252708Z +        ))
2026-01-27T08:49:39.9252884Z        }
2026-01-27T08:49:39.9253058Z      }
2026-01-27T08:49:39.9253223Z    };
2026-01-27T08:49:39.9253975Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:142:
2026-01-27T08:49:39.9254687Z            valid_logo_file: None,
2026-01-27T08:49:39.9254926Z          })
2026-01-27T08:49:39.9255111Z        } else {
2026-01-27T08:49:39.9255538Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:39.9256000Z +        Err(DSYCLauncherError(
2026-01-27T08:49:39.9256366Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:39.9256680Z +        ))
2026-01-27T08:49:39.9256852Z        }
2026-01-27T08:49:39.9257020Z      }
2026-01-27T08:49:39.9257189Z    };
2026-01-27T08:49:39.9258064Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:33:
2026-01-27T08:49:39.9259092Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:39.9259556Z    };
2026-01-27T08:49:39.9259799Z    if meta.is_empty() {
2026-01-27T08:49:39.9260284Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:39.9260791Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:39.9261178Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:39.9261491Z +    ));
2026-01-27T08:49:39.9261661Z    }
2026-01-27T08:49:39.9261839Z    Ok(meta.remove(0))
2026-01-27T08:49:39.9262045Z  }
2026-01-27T08:49:39.9262633Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:40:
2026-01-27T08:49:39.9263497Z  
2026-01-27T08:49:39.9264096Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:39.9264623Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:39.9264889Z +  dir_path: &Path,
2026-01-27T08:49:39.9265173Z +) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:39.9265551Z    let legacy_forge_file_path = dir_path.join("mcmod.info");
2026-01-27T08:49:39.9265917Z    let mut meta: Vec<LegacyForgeModMetadata> =
2026-01-27T08:49:39.9266320Z      match tokio::fs::read_to_string(legacy_forge_file_path).await {
2026-01-27T08:49:39.9266997Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:49:
2026-01-27T08:49:39.9268445Z        Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:39.9268757Z      };
2026-01-27T08:49:39.9268926Z    if meta.is_empty() {
2026-01-27T08:49:39.9269367Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:39.9269825Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:39.9270174Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:39.9270449Z +    ));
2026-01-27T08:49:39.9270597Z    }
2026-01-27T08:49:39.9270758Z    Ok(meta.remove(0))
2026-01-27T08:49:39.9270935Z  }
2026-01-27T08:49:39.9271445Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/liteloader.rs:36:
2026-01-27T08:49:39.9271918Z    Ok(meta)
2026-01-27T08:49:39.9272069Z  }
2026-01-27T08:49:39.9272210Z  
2026-01-27T08:49:39.9272683Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:39.9273194Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:39.9273455Z +  dir_path: &Path,
2026-01-27T08:49:39.9273728Z +) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:39.9274104Z    let liteloader_file_path = dir_path.join("litemod.json");
2026-01-27T08:49:39.9274509Z    let meta: LiteloaderModMetadata = serde_json::from_str(
2026-01-27T08:49:39.9274880Z      tokio::fs::read_to_string(liteloader_file_path)
2026-01-27T08:49:39.9275478Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:6:
2026-01-27T08:49:39.9275979Z  use std::path::{Path, PathBuf};
2026-01-27T08:49:39.9276211Z  use zip::ZipArchive;
2026-01-27T08:49:39.9276390Z  
2026-01-27T08:49:39.9276854Z -pub fn load_resourcepack_from_zip(path: &PathBuf) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:39.9277357Z +pub fn load_resourcepack_from_zip(
2026-01-27T08:49:39.9277607Z +  path: &PathBuf,
2026-01-27T08:49:39.9278180Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:39.9278592Z    let file = match fs::File::open(path) {
2026-01-27T08:49:39.9278847Z      Ok(val) => val,
2026-01-27T08:49:39.9279112Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:39.9279720Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:54:
2026-01-27T08:49:39.9280222Z    Ok((description, icon_src))
2026-01-27T08:49:39.9280430Z  }
2026-01-27T08:49:39.9280571Z  
2026-01-27T08:49:39.9281040Z -pub async fn load_resourcepack_from_dir(path: &Path) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:39.9281562Z +pub async fn load_resourcepack_from_dir(
2026-01-27T08:49:39.9281814Z +  path: &Path,
2026-01-27T08:49:39.9282099Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:39.9282425Z    let mut description = String::new();
2026-01-27T08:49:39.9282653Z  
2026-01-27T08:49:39.9282984Z    if let Ok(mut contents) = tokio::fs::read_to_string(path.join("pack.mcmeta")).await {
2026-01-27T08:49:39.9394172Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:63:
2026-01-27T08:49:39.9395236Z  
2026-01-27T08:49:39.9395579Z  impl LaunchArguments {
2026-01-27T08:49:39.9396145Z    pub fn into_hashmap(self) -> DSYCLauncherResult<HashMap<String, String>> {
2026-01-27T08:49:39.9397418Z -    let value =
2026-01-27T08:49:39.9399057Z -      serde_json::to_value(self).map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:39.9400194Z +    let value = serde_json::to_value(self)
2026-01-27T08:49:39.9401163Z +      .map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:39.9401716Z      let obj = value
2026-01-27T08:49:39.9402153Z        .as_object()
2026-01-27T08:49:39.9403051Z        .ok_or_else(|| DSYCLauncherError("Failed to convert LaunchParams to HashMap".to_string()))?;
2026-01-27T08:49:39.9404476Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:338:
2026-01-27T08:49:39.9405301Z      }
2026-01-27T08:49:39.9405548Z  
2026-01-27T08:49:39.9405900Z      // Get library paths based on platform
2026-01-27T08:49:39.9406372Z -      let mut lib_paths = Vec::new();
2026-01-27T08:49:39.9406610Z -      
2026-01-27T08:49:39.9406803Z -      // Add VC libs path
2026-01-27T08:49:39.9407063Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:39.9407330Z -      {
2026-01-27T08:49:39.9407507Z -        use std::env;
2026-01-27T08:49:39.9407741Z -        use std::path::PathBuf;
2026-01-27T08:49:39.9408287Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9408655Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9408975Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:39.9409469Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x86");
2026-01-27T08:49:39.9409924Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9410398Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x64");
2026-01-27T08:49:39.9411286Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("windows").join(if cfg!(target_arch = "x86") { "x86" } else { "x64" });
2026-01-27T08:49:39.9412034Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9412525Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9412849Z -          }
2026-01-27T08:49:39.9413072Z +    let mut lib_paths = Vec::new();
2026-01-27T08:49:39.9413292Z +
2026-01-27T08:49:39.9413465Z +    // Add VC libs path
2026-01-27T08:49:39.9413704Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:39.9413922Z +    {
2026-01-27T08:49:39.9414090Z +      use std::env;
2026-01-27T08:49:39.9414313Z +      use std::path::PathBuf;
2026-01-27T08:49:39.9414610Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9414949Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9415262Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:39.9415539Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:39.9415780Z +            .join("assets")
2026-01-27T08:49:39.9416002Z +            .join("vc-libs")
2026-01-27T08:49:39.9416224Z +            .join("windows")
2026-01-27T08:49:39.9416445Z +            .join("x86");
2026-01-27T08:49:39.9416696Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9417009Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:39.9417247Z +            .join("assets")
2026-01-27T08:49:39.9417470Z +            .join("vc-libs")
2026-01-27T08:49:39.9417702Z +            .join("windows")
2026-01-27T08:49:39.9418177Z +            .join("x64");
2026-01-27T08:49:39.9418490Z +          let common_libs_dir = app_dir
2026-01-27T08:49:39.9418754Z +            .join("assets")
2026-01-27T08:49:39.9418976Z +            .join("libs")
2026-01-27T08:49:39.9419181Z +            .join("natives")
2026-01-27T08:49:39.9419397Z +            .join("windows")
2026-01-27T08:49:39.9419666Z +            .join(if cfg!(target_arch = "x86") {
2026-01-27T08:49:39.9419923Z +              "x86"
2026-01-27T08:49:39.9420111Z +            } else {
2026-01-27T08:49:39.9420292Z +              "x64"
2026-01-27T08:49:39.9420654Z +            });
2026-01-27T08:49:39.9421088Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9421582Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9421902Z          }
2026-01-27T08:49:39.9422055Z        }
2026-01-27T08:49:39.9422264Z -      #[cfg(target_os = "macos")]
2026-01-27T08:49:39.9422483Z -      {
2026-01-27T08:49:39.9422655Z -        use std::env;
2026-01-27T08:49:39.9422904Z -        use std::path::PathBuf;
2026-01-27T08:49:39.9423205Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9423565Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9423825Z +    }
2026-01-27T08:49:39.9424018Z +    #[cfg(target_os = "macos")]
2026-01-27T08:49:39.9424220Z +    {
2026-01-27T08:49:39.9424381Z +      use std::env;
2026-01-27T08:49:39.9424606Z +      use std::path::PathBuf;
2026-01-27T08:49:39.9424899Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9425236Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9425587Z +          if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:39.9425911Z              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:39.9426262Z -              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:39.9426878Z -                let vc_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("vc-libs").join("macos");
2026-01-27T08:49:39.9427768Z -                let common_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("libs").join("natives").join("macos");
2026-01-27T08:49:39.9428692Z -                lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9429190Z -                lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9429515Z -              }
2026-01-27T08:49:39.9429745Z +              let vc_libs_dir = app_dir
2026-01-27T08:49:39.9430026Z +                .join("Contents")
2026-01-27T08:49:39.9430295Z +                .join("Resources")
2026-01-27T08:49:39.9430561Z +                .join("assets")
2026-01-27T08:49:39.9430812Z +                .join("vc-libs")
2026-01-27T08:49:39.9431057Z +                .join("macos");
2026-01-27T08:49:39.9431327Z +              let common_libs_dir = app_dir
2026-01-27T08:49:39.9431604Z +                .join("Contents")
2026-01-27T08:49:39.9431863Z +                .join("Resources")
2026-01-27T08:49:39.9432117Z +                .join("assets")
2026-01-27T08:49:39.9432353Z +                .join("libs")
2026-01-27T08:49:39.9432595Z +                .join("natives")
2026-01-27T08:49:39.9432833Z +                .join("macos");
2026-01-27T08:49:39.9433192Z +              lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9433674Z +              lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9433995Z              }
2026-01-27T08:49:39.9434163Z            }
2026-01-27T08:49:39.9434326Z          }
2026-01-27T08:49:39.9434838Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:376:
2026-01-27T08:49:39.9435314Z        }
2026-01-27T08:49:39.9435510Z -      #[cfg(target_os = "linux")]
2026-01-27T08:49:39.9435726Z -      {
2026-01-27T08:49:39.9435902Z -        use std::env;
2026-01-27T08:49:39.9436130Z -        use std::path::PathBuf;
2026-01-27T08:49:39.9436433Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9436787Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9437237Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:39.9437650Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9438494Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("x64");
2026-01-27T08:49:39.9439007Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:39.9439729Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("arm64");
2026-01-27T08:49:39.9440528Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9441005Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9441328Z -          }
2026-01-27T08:49:39.9441480Z +    }
2026-01-27T08:49:39.9441681Z +    #[cfg(target_os = "linux")]
2026-01-27T08:49:39.9441881Z +    {
2026-01-27T08:49:39.9442053Z +      use std::env;
2026-01-27T08:49:39.9442284Z +      use std::path::PathBuf;
2026-01-27T08:49:39.9442577Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9442926Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9443382Z +          let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:39.9443780Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9444070Z +          let common_libs_dir = app_dir
2026-01-27T08:49:39.9444330Z +            .join("assets")
2026-01-27T08:49:39.9444566Z +            .join("libs")
2026-01-27T08:49:39.9444998Z +            .join("natives")
2026-01-27T08:49:39.9445419Z +            .join("linux")
2026-01-27T08:49:39.9445799Z +            .join("x64");
2026-01-27T08:49:39.9446240Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:39.9446643Z +          let common_libs_dir = app_dir
2026-01-27T08:49:39.9446898Z +            .join("assets")
2026-01-27T08:49:39.9447106Z +            .join("libs")
2026-01-27T08:49:39.9447316Z +            .join("natives")
2026-01-27T08:49:39.9447530Z +            .join("linux")
2026-01-27T08:49:39.9447736Z +            .join("arm64");
2026-01-27T08:49:39.9448366Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9448851Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9449176Z          }
2026-01-27T08:49:39.9449330Z        }
2026-01-27T08:49:39.9449531Z -      #[cfg(target_os = "android")]
2026-01-27T08:49:39.9449759Z -      {
2026-01-27T08:49:39.9449945Z -        use std::env;
2026-01-27T08:49:39.9450186Z -        use std::path::PathBuf;
2026-01-27T08:49:39.9450496Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9450846Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9451203Z -            // Android app structure: app/lib/[arch]/
2026-01-27T08:49:39.9451529Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:39.9451823Z -            let arch_dir = "arm64-v8a";
2026-01-27T08:49:39.9452108Z -            #[cfg(target_arch = "arm")]
2026-01-27T08:49:39.9452420Z -            let arch_dir = "armeabi-v7a";
2026-01-27T08:49:39.9452708Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:39.9452981Z -            let arch_dir = "x86";
2026-01-27T08:49:39.9453251Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9453535Z -            let arch_dir = "x86_64";
2026-01-27T08:49:39.9453753Z -            
2026-01-27T08:49:39.9454224Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("android").join(arch_dir);
2026-01-27T08:49:39.9454961Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("android").join(arch_dir);
2026-01-27T08:49:39.9455566Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9456046Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9456370Z -          }
2026-01-27T08:49:39.9456526Z +    }
2026-01-27T08:49:39.9456732Z +    #[cfg(target_os = "android")]
2026-01-27T08:49:39.9456946Z +    {
2026-01-27T08:49:39.9457111Z +      use std::env;
2026-01-27T08:49:39.9457341Z +      use std::path::PathBuf;
2026-01-27T08:49:39.9457632Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:39.9458121Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:39.9458469Z +          // Android app structure: app/lib/[arch]/
2026-01-27T08:49:39.9458959Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:39.9459361Z +          let arch_dir = "arm64-v8a";
2026-01-27T08:49:39.9459641Z +          #[cfg(target_arch = "arm")]
2026-01-27T08:49:39.9459923Z +          let arch_dir = "armeabi-v7a";
2026-01-27T08:49:39.9460204Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:39.9460465Z +          let arch_dir = "x86";
2026-01-27T08:49:39.9460734Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:39.9461008Z +          let arch_dir = "x86_64";
2026-01-27T08:49:39.9461223Z +
2026-01-27T08:49:39.9461424Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:39.9461663Z +            .join("assets")
2026-01-27T08:49:39.9461889Z +            .join("vc-libs")
2026-01-27T08:49:39.9462113Z +            .join("android")
2026-01-27T08:49:39.9462327Z +            .join(arch_dir);
2026-01-27T08:49:39.9462589Z +          let common_libs_dir = app_dir
2026-01-27T08:49:39.9462834Z +            .join("assets")
2026-01-27T08:49:39.9481824Z +            .join("libs")
2026-01-27T08:49:39.9482164Z +            .join("natives")
2026-01-27T08:49:39.9482429Z +            .join("android")
2026-01-27T08:49:39.9482674Z +            .join(arch_dir);
2026-01-27T08:49:39.9483046Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9483541Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:39.9483868Z          }
2026-01-27T08:49:39.9484023Z        }
2026-01-27T08:49:39.9484177Z -      
2026-01-27T08:49:39.9484451Z -      // Combine natives directory and all library paths
2026-01-27T08:49:39.9484917Z -      let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:39.9485232Z -      
2026-01-27T08:49:39.9485443Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:39.9485706Z -      let separator = ";";
2026-01-27T08:49:39.9485978Z -      #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:39.9486236Z -      let separator = ":";
2026-01-27T08:49:39.9486439Z -      
2026-01-27T08:49:39.9486641Z -      for lib_path in lib_paths {
2026-01-27T08:49:39.9486915Z -        if !lib_path.is_empty() {
2026-01-27T08:49:39.9487329Z -          java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:39.9487665Z -        }
2026-01-27T08:49:39.9487822Z +    }
2026-01-27T08:49:39.9488124Z +
2026-01-27T08:49:39.9488570Z +    // Combine natives directory and all library paths
2026-01-27T08:49:39.9489017Z +    let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:39.9489329Z +
2026-01-27T08:49:39.9489533Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:39.9489781Z +    let separator = ";";
2026-01-27T08:49:39.9490037Z +    #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:39.9490296Z +    let separator = ":";
2026-01-27T08:49:39.9490482Z +
2026-01-27T08:49:39.9490680Z +    for lib_path in lib_paths {
2026-01-27T08:49:39.9490936Z +      if !lib_path.is_empty() {
2026-01-27T08:49:39.9491517Z +        java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:39.9491872Z        }
2026-01-27T08:49:39.9492026Z -      
2026-01-27T08:49:39.9492242Z -      client_jvm_args.extend(vec![
2026-01-27T08:49:39.9492619Z -        format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:39.9493066Z -        "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:39.9493553Z -        "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:39.9493880Z -      ]);
2026-01-27T08:49:39.9494032Z +    }
2026-01-27T08:49:39.9494181Z +
2026-01-27T08:49:39.9494376Z +    client_jvm_args.extend(vec![
2026-01-27T08:49:39.9494722Z +      format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:39.9495158Z +      "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:39.9495624Z +      "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:39.9495945Z +    ]);
2026-01-27T08:49:39.9496202Z      cmd.extend(replace_arguments(client_jvm_args, &map));
2026-01-27T08:49:39.9496720Z    }
2026-01-27T08:49:39.9496971Z  
2026-01-27T08:49:39.9497508Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/file_validator.rs:207:
2026-01-27T08:49:39.9498106Z    })
2026-01-27T08:49:39.9498261Z  }
2026-01-27T08:49:39.9498404Z  
2026-01-27T08:49:39.9498870Z -pub fn convert_library_name_to_path(name: &str, native: Option<String>) -> DSYCLauncherResult<String> {
2026-01-27T08:49:39.9499374Z +pub fn convert_library_name_to_path(
2026-01-27T08:49:39.9499619Z +  name: &str,
2026-01-27T08:49:39.9499824Z +  native: Option<String>,
2026-01-27T08:49:39.9500080Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:39.9500320Z    let LibraryParts {
2026-01-27T08:49:39.9500511Z      path,
2026-01-27T08:49:39.9500684Z      pack_name,
2026-01-27T08:49:39.9542872Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:33:
2026-01-27T08:49:39.9543507Z  }
2026-01-27T08:49:39.9543711Z  
2026-01-27T08:49:39.9543958Z  #[tauri::command]
2026-01-27T08:49:39.9544648Z -pub fn update_launcher_config(app: AppHandle, key_path: String, value: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9545322Z +pub fn update_launcher_config(
2026-01-27T08:49:39.9545623Z +  app: AppHandle,
2026-01-27T08:49:39.9545882Z +  key_path: String,
2026-01-27T08:49:39.9546131Z +  value: String,
2026-01-27T08:49:39.9546410Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9546826Z    let config_binding = app.state::<Mutex<LauncherConfig>>();
2026-01-27T08:49:39.9547289Z    let mut config_state = config_binding.lock()?;
2026-01-27T08:49:39.9547717Z    let key_path = camel_to_snake_case(key_path.as_str());
2026-01-27T08:49:39.9548677Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:369:
2026-01-27T08:49:39.9549234Z  }
2026-01-27T08:49:39.9549414Z  
2026-01-27T08:49:39.9549612Z  #[tauri::command]
2026-01-27T08:49:39.9550273Z -pub async fn download_launcher_update(app: AppHandle, version: VersionMetaInfo) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9550967Z +pub async fn download_launcher_update(
2026-01-27T08:49:39.9551303Z +  app: AppHandle,
2026-01-27T08:49:39.9551561Z +  version: VersionMetaInfo,
2026-01-27T08:49:39.9551891Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9552327Z    if version.version.is_empty() || version.version == "up2date" {
2026-01-27T08:49:39.9552740Z      Ok(())
2026-01-27T08:49:39.9552939Z    } else {
2026-01-27T08:49:39.9698993Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:21:
2026-01-27T08:49:39.9699804Z    T: serde::de::DeserializeOwned,
2026-01-27T08:49:39.9700126Z    P: serde::Serialize,
2026-01-27T08:49:39.9700369Z  {
2026-01-27T08:49:39.9700807Z -  let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:39.9701363Z -    .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:39.9701731Z +  let curseforge_api_key =
2026-01-27T08:49:39.9702358Z +    env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:39.9702853Z  
2026-01-27T08:49:39.9703181Z    let request_builder = match request_type {
2026-01-27T08:49:39.9703879Z      OtherResourceRequestType::GetWithParams(params) => client.get(url).query(params),
2026-01-27T08:49:39.9704935Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:524:
2026-01-27T08:49:39.9705603Z    resource_id: &str,
2026-01-27T08:49:39.9705927Z  ) -> DSYCLauncherResult<Option<String>> {
2026-01-27T08:49:39.9706264Z    let result = async {
2026-01-27T08:49:39.9706776Z -    let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:39.9707374Z -      .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:39.9707772Z +    let curseforge_api_key =
2026-01-27T08:49:39.9708590Z +      env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:39.9709458Z  
2026-01-27T08:49:39.9710096Z      let url = get_curseforge_api(OtherResourceApiEndpoint::TranslateDesc, Some(resource_id))?;
2026-01-27T08:49:39.9710762Z      let client = app.state::<reqwest::Client>();
2026-01-27T08:49:39.9811561Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/misc.rs:26:
2026-01-27T08:49:39.9812411Z  }
2026-01-27T08:49:39.9812596Z  
2026-01-27T08:49:39.9812882Z  // https://bmclapidoc.bangbang93.com/
2026-01-27T08:49:39.9813608Z -pub fn get_download_api(source: SourceType, resource_type: ResourceType) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:39.9814212Z +pub fn get_download_api(
2026-01-27T08:49:39.9814485Z +  source: SourceType,
2026-01-27T08:49:39.9814782Z +  resource_type: ResourceType,
2026-01-27T08:49:39.9815108Z +) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:39.9815384Z    match source {
2026-01-27T08:49:39.9815726Z      SourceType::Official => match resource_type {
2026-01-27T08:49:39.9816485Z        ResourceType::VersionManifest => Ok(Url::parse("https://launchermeta.mojang.com/mc/game/version_manifest.json")?),
2026-01-27T08:49:39.9901818Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:2:
2026-01-27T08:49:39.9902478Z  use crate::tasks::download::DownloadTask;
2026-01-27T08:49:39.9902860Z  use crate::tasks::events::GEventStatus;
2026-01-27T08:49:39.9903225Z  use crate::tasks::monitor::TaskMonitor;
2026-01-27T08:49:39.9903822Z -use crate::tasks::{PTaskGroupDesc, PTaskParam, DSYCLauncherFutureDesc, THandle};
2026-01-27T08:49:39.9904597Z +use crate::tasks::{DSYCLauncherFutureDesc, PTaskGroupDesc, PTaskParam, THandle};
2026-01-27T08:49:39.9905128Z  use crate::utils::fs::extract_filename;
2026-01-27T08:49:39.9905432Z  use std::pin::Pin;
2026-01-27T08:49:39.9905669Z  use std::time::Duration;
2026-01-27T08:49:39.9906250Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:76:
2026-01-27T08:49:39.9906752Z  }
2026-01-27T08:49:39.9906927Z  
2026-01-27T08:49:39.9907120Z  #[tauri::command]
2026-01-27T08:49:39.9907753Z -pub fn set_transient_task_state(app: AppHandle, task_id: u32, state: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9908594Z +pub fn set_transient_task_state(
2026-01-27T08:49:39.9908884Z +  app: AppHandle,
2026-01-27T08:49:39.9909101Z +  task_id: u32,
2026-01-27T08:49:39.9909334Z +  state: String,
2026-01-27T08:49:39.9909600Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9909973Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:39.9910437Z    monitor.set_transient_task(app.clone(), task_id, state);
2026-01-27T08:49:39.9910793Z    Ok(())
2026-01-27T08:49:39.9911313Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:131:
2026-01-27T08:49:39.9911808Z  }
2026-01-27T08:49:39.9911980Z  
2026-01-27T08:49:39.9912168Z  #[tauri::command]
2026-01-27T08:49:39.9912804Z -pub async fn resume_progressive_task_group(app: AppHandle, task_group: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9913486Z +pub async fn resume_progressive_task_group(
2026-01-27T08:49:39.9913823Z +  app: AppHandle,
2026-01-27T08:49:39.9914060Z +  task_group: String,
2026-01-27T08:49:39.9914335Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:39.9914637Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:39.9915030Z    monitor.resume_progressive_task_group(task_group).await;
2026-01-27T08:49:39.9915331Z    Ok(())
2026-01-27T08:49:40.0030746Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:152:
2026-01-27T08:49:40.0031354Z  /// ```rust
2026-01-27T08:49:40.0031838Z  /// let mod_paths = get_files_with_regex(&mods_dir, &valid_extensions).unwrap_or_default();
2026-01-27T08:49:40.0032323Z  /// ```
2026-01-27T08:49:40.0032956Z -pub fn get_files_with_regex<P: AsRef<Path>>(path: P, pattern: &Regex) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.0033684Z +pub fn get_files_with_regex<P: AsRef<Path>>(
2026-01-27T08:49:40.0034078Z +  path: P,
2026-01-27T08:49:40.0034298Z +  pattern: &Regex,
2026-01-27T08:49:40.0034942Z +) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.0035507Z    let dir_entries = fs::read_dir(&path).map_err(|e| {
2026-01-27T08:49:40.0035897Z      let error_message = match e.kind() {
2026-01-27T08:49:40.0036335Z        io::ErrorKind::NotFound => "Path does not exist".to_string(),
2026-01-27T08:49:40.0037005Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:441:
2026-01-27T08:49:40.0037469Z    }
2026-01-27T08:49:40.0037644Z  }
2026-01-27T08:49:40.0037819Z  
2026-01-27T08:49:40.0038608Z -pub fn create_zip_from_dirs(paths: Vec<PathBuf>, zip_file_path: PathBuf) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.0039210Z +pub fn create_zip_from_dirs(
2026-01-27T08:49:40.0039501Z +  paths: Vec<PathBuf>,
2026-01-27T08:49:40.0039766Z +  zip_file_path: PathBuf,
2026-01-27T08:49:40.0040086Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.0040465Z    let zip_file = std::fs::File::create(&zip_file_path)
2026-01-27T08:49:40.0041036Z      .map_err(|e| DSYCLauncherError(format!("Failed to create zip file: {}", e)))?;
2026-01-27T08:49:40.0041557Z    let mut zip = ZipWriter::new(zip_file);
2026-01-27T08:49:40.0088712Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/web.rs:44:
2026-01-27T08:49:40.0089683Z        // According to the User-Agent requirements of mozilla and BMCLAPI, the User-Agent is set to start with ${NAME}/${VERSION}
2026-01-27T08:49:40.0090424Z        // https://github.com/MCLF-CN/docs/issues/2
2026-01-27T08:49:40.0091008Z        // https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Reference/Headers/User-Agent
2026-01-27T08:49:40.0091894Z -      if let Ok(header_value) = format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse() {
2026-01-27T08:49:40.0092506Z +      if let Ok(header_value) =
2026-01-27T08:49:40.0093019Z +        format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse()
2026-01-27T08:49:40.0093450Z +      {
2026-01-27T08:49:40.0093743Z          let mut headers = HeaderMap::new();
2026-01-27T08:49:40.0094162Z          headers.insert("User-Agent", header_value);
2026-01-27T08:49:40.0094502Z          builder = builder.default_headers(headers);
2026-01-27T08:49:40.0152682Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:43:
2026-01-27T08:49:40.0153563Z  
2026-01-27T08:49:40.0153920Z    let int_path = meta["intermediary"]["maven"]
2026-01-27T08:49:40.0154265Z      .as_str()
2026-01-27T08:49:40.0154725Z -    .ok_or(DSYCLauncherError("meta missing intermediary maven".to_string()))?;
2026-01-27T08:49:40.0155235Z +    .ok_or(DSYCLauncherError(
2026-01-27T08:49:40.0155613Z +      "meta missing intermediary maven".to_string(),
2026-01-27T08:49:40.0155935Z +    ))?;
2026-01-27T08:49:40.0156116Z  
2026-01-27T08:49:40.0156420Z    let main_class = meta["launcherMeta"]["mainClass"]["client"]
2026-01-27T08:49:40.0156784Z      .as_str()
2026-01-27T08:49:40.0157417Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:136:
2026-01-27T08:49:40.0158318Z        .and_then(|s| s.to_str())
2026-01-27T08:49:40.0158598Z        .unwrap_or_default()
2026-01-27T08:49:40.0158842Z        .to_string();
2026-01-27T08:49:40.0159460Z -    fs::remove_file(&p).map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0160015Z +    fs::remove_file(&p)
2026-01-27T08:49:40.0160519Z +      .map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0160968Z    }
2026-01-27T08:49:40.0161139Z  
2026-01-27T08:49:40.0161315Z    Ok(())
2026-01-27T08:49:40.0205634Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:43:
2026-01-27T08:49:40.0206239Z  
2026-01-27T08:49:40.0206516Z    let int_path = meta["intermediary"]["maven"]
2026-01-27T08:49:40.0206850Z      .as_str()
2026-01-27T08:49:40.0207325Z -    .ok_or(DSYCLauncherError("meta missing intermediary maven".to_string()))?;
2026-01-27T08:49:40.0208473Z +    .ok_or(DSYCLauncherError(
2026-01-27T08:49:40.0209039Z +      "meta missing intermediary maven".to_string(),
2026-01-27T08:49:40.0209401Z +    ))?;
2026-01-27T08:49:40.0209585Z  
2026-01-27T08:49:40.0209904Z    let main_class = meta["launcherMeta"]["mainClass"]["client"]
2026-01-27T08:49:40.0210287Z      .as_str()
2026-01-27T08:49:40.0210930Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:136:
2026-01-27T08:49:40.0211558Z        .and_then(|s| s.to_str())
2026-01-27T08:49:40.0211841Z        .unwrap_or_default()
2026-01-27T08:49:40.0212090Z        .to_string();
2026-01-27T08:49:40.0212706Z -    fs::remove_file(&p).map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0213272Z +    fs::remove_file(&p)
2026-01-27T08:49:40.0213782Z +      .map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0214237Z    }
2026-01-27T08:49:40.0214406Z  
2026-01-27T08:49:40.0214564Z    Ok(())
2026-01-27T08:49:40.0505417Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/misc.rs:90:
2026-01-27T08:49:40.0506800Z    get_instance_subdir_paths(app, instance, &[directory_type]).and_then(|mut paths| paths.pop())
2026-01-27T08:49:40.0507560Z  }
2026-01-27T08:49:40.0507819Z  
2026-01-27T08:49:40.0508934Z -pub fn unify_instance_name(src_version_path: &PathBuf, tgt_name: &String) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.0509855Z +pub fn unify_instance_name(
2026-01-27T08:49:40.0510348Z +  src_version_path: &PathBuf,
2026-01-27T08:49:40.0510763Z +  tgt_name: &String,
2026-01-27T08:49:40.0511214Z +) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.0511809Z    if !sanitize_filename::is_sanitized(tgt_name) {
2026-01-27T08:49:40.0512476Z      return Err(InstanceError::InvalidNameError.into());
2026-01-27T08:49:40.0512984Z    }
2026-01-27T08:49:40.0517699Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:6:
2026-01-27T08:49:40.0518836Z  use std::path::{Path, PathBuf};
2026-01-27T08:49:40.0519293Z  use zip::ZipArchive;
2026-01-27T08:49:40.0519612Z  
2026-01-27T08:49:40.0520464Z -pub fn load_resourcepack_from_zip(path: &PathBuf) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.0521398Z +pub fn load_resourcepack_from_zip(
2026-01-27T08:49:40.0521840Z +  path: &PathBuf,
2026-01-27T08:49:40.0522392Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.0523007Z    let file = match fs::File::open(path) {
2026-01-27T08:49:40.0523438Z      Ok(val) => val,
2026-01-27T08:49:40.0523867Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.0525008Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:54:
2026-01-27T08:49:40.0525892Z    Ok((description, icon_src))
2026-01-27T08:49:40.0526251Z  }
2026-01-27T08:49:40.0526486Z  
2026-01-27T08:49:40.0527346Z -pub async fn load_resourcepack_from_dir(path: &Path) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.0528573Z +pub async fn load_resourcepack_from_dir(
2026-01-27T08:49:40.0529013Z +  path: &Path,
2026-01-27T08:49:40.0529528Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.0530130Z    let mut description = String::new();
2026-01-27T08:49:40.0530540Z  
2026-01-27T08:49:40.0531160Z    if let Ok(mut contents) = tokio::fs::read_to_string(path.join("pack.mcmeta")).await {
2026-01-27T08:49:40.0643675Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:410:
2026-01-27T08:49:40.0644830Z    (game_version, loader_version, loader_type, None)
2026-01-27T08:49:40.0645328Z  }
2026-01-27T08:49:40.0645581Z  
2026-01-27T08:49:40.0646464Z -fn rules_is_allowed(rules: &Vec<InstructionRule>, feature: &FeaturesInfo) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.0647323Z +fn rules_is_allowed(
2026-01-27T08:49:40.0647752Z +  rules: &Vec<InstructionRule>,
2026-01-27T08:49:40.0649000Z +  feature: &FeaturesInfo,
2026-01-27T08:49:40.0649707Z +) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.0650205Z    let mut weak_allowed = true;
2026-01-27T08:49:40.0650610Z    for rule in rules {
2026-01-27T08:49:40.0651087Z      let (allow, strong) = rule.is_allowed(feature)?;
2026-01-27T08:49:40.0652211Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:466:
2026-01-27T08:49:40.0653062Z    app: &AppHandle,
2026-01-27T08:49:40.0653753Z  ) -> DSYCLauncherResult<HashMap<String, HashMap<String, Option<LibrariesValue>>>> {
2026-01-27T08:49:40.0654754Z    let path = get_app_resource_filepath(app, "assets/game/natives.json")?;
2026-01-27T08:49:40.0655368Z -  let txt =
2026-01-27T08:49:40.0656278Z -    fs::read_to_string(&path).map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.0657171Z +  let txt = fs::read_to_string(&path)
2026-01-27T08:49:40.0658246Z +    .map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.0659375Z    let map: HashMap<String, HashMap<String, Option<LibrariesValue>>> = serde_json::from_str(&txt)
2026-01-27T08:49:40.0660434Z      .map_err(|e| DSYCLauncherError(format!("parse natives.json failed: {e}")))?;
2026-01-27T08:49:40.0661115Z    Ok(map)
2026-01-27T08:49:40.0686941Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:43:
2026-01-27T08:49:40.0687816Z  
2026-01-27T08:49:40.0688400Z    let int_path = meta["intermediary"]["maven"]
2026-01-27T08:49:40.0688870Z      .as_str()
2026-01-27T08:49:40.0689551Z -    .ok_or(DSYCLauncherError("meta missing intermediary maven".to_string()))?;
2026-01-27T08:49:40.0690304Z +    .ok_or(DSYCLauncherError(
2026-01-27T08:49:40.0690895Z +      "meta missing intermediary maven".to_string(),
2026-01-27T08:49:40.0691375Z +    ))?;
2026-01-27T08:49:40.0691635Z  
2026-01-27T08:49:40.0692100Z    let main_class = meta["launcherMeta"]["mainClass"]["client"]
2026-01-27T08:49:40.0692647Z      .as_str()
2026-01-27T08:49:40.0693588Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:136:
2026-01-27T08:49:40.0694495Z        .and_then(|s| s.to_str())
2026-01-27T08:49:40.0694901Z        .unwrap_or_default()
2026-01-27T08:49:40.0695287Z        .to_string();
2026-01-27T08:49:40.0696164Z -    fs::remove_file(&p).map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0696981Z +    fs::remove_file(&p)
2026-01-27T08:49:40.0697716Z +      .map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.0698657Z    }
2026-01-27T08:49:40.0698922Z  
2026-01-27T08:49:40.0699182Z    Ok(())
2026-01-27T08:49:40.0843203Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/misc.rs:90:
2026-01-27T08:49:40.0844571Z    get_instance_subdir_paths(app, instance, &[directory_type]).and_then(|mut paths| paths.pop())
2026-01-27T08:49:40.0845377Z  }
2026-01-27T08:49:40.0845639Z  
2026-01-27T08:49:40.0846585Z -pub fn unify_instance_name(src_version_path: &PathBuf, tgt_name: &String) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.0847491Z +pub fn unify_instance_name(
2026-01-27T08:49:40.0848175Z +  src_version_path: &PathBuf,
2026-01-27T08:49:40.0848612Z +  tgt_name: &String,
2026-01-27T08:49:40.0849183Z +) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.0849791Z    if !sanitize_filename::is_sanitized(tgt_name) {
2026-01-27T08:49:40.0850440Z      return Err(InstanceError::InvalidNameError.into());
2026-01-27T08:49:40.0850935Z    }
2026-01-27T08:49:40.0921712Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/modpack/curseforge.rs:150:
2026-01-27T08:49:40.0922752Z        let project_id = file.project_id;
2026-01-27T08:49:40.0923192Z  
2026-01-27T08:49:40.0923475Z        async move {
2026-01-27T08:49:40.0924191Z -        let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.0925507Z -          .map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.0926324Z +        let curseforge_api_key =
2026-01-27T08:49:40.0927265Z +          env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.0928264Z  
2026-01-27T08:49:40.0928553Z          let class_id = {
2026-01-27T08:49:40.0928986Z            let project_resp = client
2026-01-27T08:49:40.1006357Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:73:
2026-01-27T08:49:40.1007366Z            valid_logo_file: None,
2026-01-27T08:49:40.1007766Z          })
2026-01-27T08:49:40.1008268Z        } else {
2026-01-27T08:49:40.1008964Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1009729Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1010334Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1010814Z +        ))
2026-01-27T08:49:40.1011120Z        }
2026-01-27T08:49:40.1011365Z      }
2026-01-27T08:49:40.1011628Z    };
2026-01-27T08:49:40.1012519Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:142:
2026-01-27T08:49:40.1013400Z            valid_logo_file: None,
2026-01-27T08:49:40.1013796Z          })
2026-01-27T08:49:40.1014071Z        } else {
2026-01-27T08:49:40.1014778Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1015515Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1016100Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1016587Z +        ))
2026-01-27T08:49:40.1016852Z        }
2026-01-27T08:49:40.1017102Z      }
2026-01-27T08:49:40.1017359Z    };
2026-01-27T08:49:40.1018476Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:33:
2026-01-27T08:49:40.1019556Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1020071Z    };
2026-01-27T08:49:40.1020359Z    if meta.is_empty() {
2026-01-27T08:49:40.1021176Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1021969Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1022580Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1023064Z +    ));
2026-01-27T08:49:40.1023335Z    }
2026-01-27T08:49:40.1023622Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1023946Z  }
2026-01-27T08:49:40.1024857Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:40:
2026-01-27T08:49:40.1025699Z  
2026-01-27T08:49:40.1026554Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1027487Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1028175Z +  dir_path: &Path,
2026-01-27T08:49:40.1028699Z +) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1029393Z    let legacy_forge_file_path = dir_path.join("mcmod.info");
2026-01-27T08:49:40.1030080Z    let mut meta: Vec<LegacyForgeModMetadata> =
2026-01-27T08:49:40.1030786Z      match tokio::fs::read_to_string(legacy_forge_file_path).await {
2026-01-27T08:49:40.1031990Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:49:
2026-01-27T08:49:40.1032996Z        Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1033476Z      };
2026-01-27T08:49:40.1033771Z    if meta.is_empty() {
2026-01-27T08:49:40.1034554Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1035365Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1035979Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1036465Z +    ));
2026-01-27T08:49:40.1036727Z    }
2026-01-27T08:49:40.1037004Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1037333Z  }
2026-01-27T08:49:40.1038541Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/liteloader.rs:36:
2026-01-27T08:49:40.1040033Z    Ok(meta)
2026-01-27T08:49:40.1040340Z  }
2026-01-27T08:49:40.1040597Z  
2026-01-27T08:49:40.1041452Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1042369Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1042837Z +  dir_path: &Path,
2026-01-27T08:49:40.1043343Z +) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1044032Z    let liteloader_file_path = dir_path.join("litemod.json");
2026-01-27T08:49:40.1044739Z    let meta: LiteloaderModMetadata = serde_json::from_str(
2026-01-27T08:49:40.1045386Z      tokio::fs::read_to_string(liteloader_file_path)
2026-01-27T08:49:40.1046470Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:6:
2026-01-27T08:49:40.1047391Z  use std::path::{Path, PathBuf};
2026-01-27T08:49:40.1048034Z  use zip::ZipArchive;
2026-01-27T08:49:40.1048390Z  
2026-01-27T08:49:40.1049267Z -pub fn load_resourcepack_from_zip(path: &PathBuf) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.1050206Z +pub fn load_resourcepack_from_zip(
2026-01-27T08:49:40.1050648Z +  path: &PathBuf,
2026-01-27T08:49:40.1051173Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.1051768Z    let file = match fs::File::open(path) {
2026-01-27T08:49:40.1052160Z      Ok(val) => val,
2026-01-27T08:49:40.1052616Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1053656Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:54:
2026-01-27T08:49:40.1054447Z    Ok((description, icon_src))
2026-01-27T08:49:40.1054798Z  }
2026-01-27T08:49:40.1055025Z  
2026-01-27T08:49:40.1055869Z -pub async fn load_resourcepack_from_dir(path: &Path) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.1056800Z +pub async fn load_resourcepack_from_dir(
2026-01-27T08:49:40.1057215Z +  path: &Path,
2026-01-27T08:49:40.1057813Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.1058631Z    let mut description = String::new();
2026-01-27T08:49:40.1059029Z  
2026-01-27T08:49:40.1059636Z    if let Ok(mut contents) = tokio::fs::read_to_string(path.join("pack.mcmeta")).await {
2026-01-27T08:49:40.1158932Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/modpack/curseforge.rs:150:
2026-01-27T08:49:40.1160030Z        let project_id = file.project_id;
2026-01-27T08:49:40.1160474Z  
2026-01-27T08:49:40.1160750Z        async move {
2026-01-27T08:49:40.1161471Z -        let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.1162302Z -          .map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.1162878Z +        let curseforge_api_key =
2026-01-27T08:49:40.1163774Z +          env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.1164595Z  
2026-01-27T08:49:40.1164887Z          let class_id = {
2026-01-27T08:49:40.1165337Z            let project_resp = client
2026-01-27T08:49:40.1288675Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/modpack/curseforge.rs:150:
2026-01-27T08:49:40.1289706Z        let project_id = file.project_id;
2026-01-27T08:49:40.1290108Z  
2026-01-27T08:49:40.1290368Z        async move {
2026-01-27T08:49:40.1291071Z -        let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.1291871Z -          .map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.1292407Z +        let curseforge_api_key =
2026-01-27T08:49:40.1293302Z +          env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.1294011Z  
2026-01-27T08:49:40.1294289Z          let class_id = {
2026-01-27T08:49:40.1294704Z            let project_resp = client
2026-01-27T08:49:40.1363626Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:410:
2026-01-27T08:49:40.1365336Z    (game_version, loader_version, loader_type, None)
2026-01-27T08:49:40.1365851Z  }
2026-01-27T08:49:40.1366099Z  
2026-01-27T08:49:40.1366966Z -fn rules_is_allowed(rules: &Vec<InstructionRule>, feature: &FeaturesInfo) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.1367843Z +fn rules_is_allowed(
2026-01-27T08:49:40.1368529Z +  rules: &Vec<InstructionRule>,
2026-01-27T08:49:40.1368986Z +  feature: &FeaturesInfo,
2026-01-27T08:49:40.1369445Z +) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.1369902Z    let mut weak_allowed = true;
2026-01-27T08:49:40.1370277Z    for rule in rules {
2026-01-27T08:49:40.1370737Z      let (allow, strong) = rule.is_allowed(feature)?;
2026-01-27T08:49:40.1371824Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:466:
2026-01-27T08:49:40.1372678Z    app: &AppHandle,
2026-01-27T08:49:40.1373361Z  ) -> DSYCLauncherResult<HashMap<String, HashMap<String, Option<LibrariesValue>>>> {
2026-01-27T08:49:40.1374347Z    let path = get_app_resource_filepath(app, "assets/game/natives.json")?;
2026-01-27T08:49:40.1374945Z -  let txt =
2026-01-27T08:49:40.1375863Z -    fs::read_to_string(&path).map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.1376818Z +  let txt = fs::read_to_string(&path)
2026-01-27T08:49:40.1377640Z +    .map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.1378925Z    let map: HashMap<String, HashMap<String, Option<LibrariesValue>>> = serde_json::from_str(&txt)
2026-01-27T08:49:40.1379984Z      .map_err(|e| DSYCLauncherError(format!("parse natives.json failed: {e}")))?;
2026-01-27T08:49:40.1380628Z    Ok(map)
2026-01-27T08:49:40.1381570Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/liteloader.rs:36:
2026-01-27T08:49:40.1382370Z    Ok(meta)
2026-01-27T08:49:40.1382641Z  }
2026-01-27T08:49:40.1382905Z  
2026-01-27T08:49:40.1383747Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1384661Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1385108Z +  dir_path: &Path,
2026-01-27T08:49:40.1385595Z +) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1386270Z    let liteloader_file_path = dir_path.join("litemod.json");
2026-01-27T08:49:40.1387021Z    let meta: LiteloaderModMetadata = serde_json::from_str(
2026-01-27T08:49:40.1387697Z      tokio::fs::read_to_string(liteloader_file_path)
2026-01-27T08:49:40.1488566Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:73:
2026-01-27T08:49:40.1489576Z            valid_logo_file: None,
2026-01-27T08:49:40.1489965Z          })
2026-01-27T08:49:40.1490248Z        } else {
2026-01-27T08:49:40.1490934Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1491721Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1492336Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1492817Z +        ))
2026-01-27T08:49:40.1493079Z        }
2026-01-27T08:49:40.1493342Z      }
2026-01-27T08:49:40.1493586Z    };
2026-01-27T08:49:40.1494471Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:142:
2026-01-27T08:49:40.1495360Z            valid_logo_file: None,
2026-01-27T08:49:40.1495754Z          })
2026-01-27T08:49:40.1496043Z        } else {
2026-01-27T08:49:40.1496732Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1497460Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1498258Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1498739Z +        ))
2026-01-27T08:49:40.1499002Z        }
2026-01-27T08:49:40.1499259Z      }
2026-01-27T08:49:40.1499534Z    };
2026-01-27T08:49:40.1500494Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:33:
2026-01-27T08:49:40.1502315Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1502821Z    };
2026-01-27T08:49:40.1503106Z    if meta.is_empty() {
2026-01-27T08:49:40.1503884Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1504675Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1505282Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1505738Z +    ));
2026-01-27T08:49:40.1505982Z    }
2026-01-27T08:49:40.1506224Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1506510Z  }
2026-01-27T08:49:40.1507367Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:40:
2026-01-27T08:49:40.1508423Z  
2026-01-27T08:49:40.1509253Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1510205Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1510697Z +  dir_path: &Path,
2026-01-27T08:49:40.1511225Z +) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1511903Z    let legacy_forge_file_path = dir_path.join("mcmod.info");
2026-01-27T08:49:40.1512535Z    let mut meta: Vec<LegacyForgeModMetadata> =
2026-01-27T08:49:40.1513235Z      match tokio::fs::read_to_string(legacy_forge_file_path).await {
2026-01-27T08:49:40.1514438Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:49:
2026-01-27T08:49:40.1515434Z        Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1515894Z      };
2026-01-27T08:49:40.1516193Z    if meta.is_empty() {
2026-01-27T08:49:40.1516973Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1517761Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1518785Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1519253Z +    ));
2026-01-27T08:49:40.1519510Z    }
2026-01-27T08:49:40.1519797Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1520110Z  }
2026-01-27T08:49:40.1521047Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/liteloader.rs:36:
2026-01-27T08:49:40.1521889Z    Ok(meta)
2026-01-27T08:49:40.1522157Z  }
2026-01-27T08:49:40.1522405Z  
2026-01-27T08:49:40.1523267Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1524212Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1524681Z +  dir_path: &Path,
2026-01-27T08:49:40.1525368Z +) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.1526081Z    let liteloader_file_path = dir_path.join("litemod.json");
2026-01-27T08:49:40.1526821Z    let meta: LiteloaderModMetadata = serde_json::from_str(
2026-01-27T08:49:40.1527478Z      tokio::fs::read_to_string(liteloader_file_path)
2026-01-27T08:49:40.1528800Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:33:
2026-01-27T08:49:40.1529806Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1530245Z    };
2026-01-27T08:49:40.1530532Z    if meta.is_empty() {
2026-01-27T08:49:40.1531282Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1532035Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1532639Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1533090Z +    ));
2026-01-27T08:49:40.1533348Z    }
2026-01-27T08:49:40.1533630Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1533921Z  }
2026-01-27T08:49:40.1534800Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:40:
2026-01-27T08:49:40.1535628Z  
2026-01-27T08:49:40.1536410Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1537308Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.1538339Z +  dir_path: &Path,
2026-01-27T08:49:40.1539077Z +) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.1539803Z    let legacy_forge_file_path = dir_path.join("mcmod.info");
2026-01-27T08:49:40.1540456Z    let mut meta: Vec<LegacyForgeModMetadata> =
2026-01-27T08:49:40.1541168Z      match tokio::fs::read_to_string(legacy_forge_file_path).await {
2026-01-27T08:49:40.1542367Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:49:
2026-01-27T08:49:40.1543327Z        Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.1543810Z      };
2026-01-27T08:49:40.1544096Z    if meta.is_empty() {
2026-01-27T08:49:40.1544816Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.1545620Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.1546177Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.1546652Z +    ));
2026-01-27T08:49:40.1546924Z    }
2026-01-27T08:49:40.1547178Z    Ok(meta.remove(0))
2026-01-27T08:49:40.1547502Z  }
2026-01-27T08:49:40.1553430Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:73:
2026-01-27T08:49:40.1554312Z            valid_logo_file: None,
2026-01-27T08:49:40.1554670Z          })
2026-01-27T08:49:40.1554913Z        } else {
2026-01-27T08:49:40.1555553Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1556261Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1556840Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1557318Z +        ))
2026-01-27T08:49:40.1557588Z        }
2026-01-27T08:49:40.1558094Z      }
2026-01-27T08:49:40.1558358Z    };
2026-01-27T08:49:40.1559203Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:142:
2026-01-27T08:49:40.1560110Z            valid_logo_file: None,
2026-01-27T08:49:40.1560504Z          })
2026-01-27T08:49:40.1560780Z        } else {
2026-01-27T08:49:40.1561482Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.1562238Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.1562826Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.1563315Z +        ))
2026-01-27T08:49:40.1563578Z        }
2026-01-27T08:49:40.1563833Z      }
2026-01-27T08:49:40.1564087Z    };
2026-01-27T08:49:40.1863837Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:194:
2026-01-27T08:49:40.1864612Z  }
2026-01-27T08:49:40.1864840Z  
2026-01-27T08:49:40.1865125Z  #[tauri::command]
2026-01-27T08:49:40.1866040Z -pub async fn reset_instance_game_config(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1866940Z +pub async fn reset_instance_game_config(
2026-01-27T08:49:40.1867370Z +  app: AppHandle,
2026-01-27T08:49:40.1867692Z +  instance_id: String,
2026-01-27T08:49:40.1868427Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1868815Z    let instance = {
2026-01-27T08:49:40.1869364Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.1870023Z      let mut state = binding.lock().unwrap();
2026-01-27T08:49:40.1871010Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:844:
2026-01-27T08:49:40.1871751Z  }
2026-01-27T08:49:40.1872007Z  
2026-01-27T08:49:40.1872281Z  #[tauri::command]
2026-01-27T08:49:40.1873183Z -pub fn create_launch_desktop_shortcut(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1874118Z +pub fn create_launch_desktop_shortcut(
2026-01-27T08:49:40.1874581Z +  app: AppHandle,
2026-01-27T08:49:40.1874937Z +  instance_id: String,
2026-01-27T08:49:40.1875372Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1875978Z    let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.1876546Z    let state = binding
2026-01-27T08:49:40.1877357Z      .lock()
2026-01-27T08:49:40.1878635Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:1065:
2026-01-27T08:49:40.1879441Z  }
2026-01-27T08:49:40.1879689Z  
2026-01-27T08:49:40.1879971Z  #[tauri::command]
2026-01-27T08:49:40.1880895Z -pub async fn finish_mod_loader_install(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1881839Z +pub async fn finish_mod_loader_install(
2026-01-27T08:49:40.1882305Z +  app: AppHandle,
2026-01-27T08:49:40.1882657Z +  instance_id: String,
2026-01-27T08:49:40.1883085Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.1883460Z    let instance = {
2026-01-27T08:49:40.1883994Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.1884596Z      let state = binding.lock()?;
2026-01-27T08:49:40.1913273Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:410:
2026-01-27T08:49:40.1914255Z    (game_version, loader_version, loader_type, None)
2026-01-27T08:49:40.1914768Z  }
2026-01-27T08:49:40.1915040Z  
2026-01-27T08:49:40.1915911Z -fn rules_is_allowed(rules: &Vec<InstructionRule>, feature: &FeaturesInfo) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.1916758Z +fn rules_is_allowed(
2026-01-27T08:49:40.1917186Z +  rules: &Vec<InstructionRule>,
2026-01-27T08:49:40.1917640Z +  feature: &FeaturesInfo,
2026-01-27T08:49:40.1918369Z +) -> DSYCLauncherResult<bool> {
2026-01-27T08:49:40.1918817Z    let mut weak_allowed = true;
2026-01-27T08:49:40.1919208Z    for rule in rules {
2026-01-27T08:49:40.1919684Z      let (allow, strong) = rule.is_allowed(feature)?;
2026-01-27T08:49:40.1920782Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/client_json.rs:466:
2026-01-27T08:49:40.1921650Z    app: &AppHandle,
2026-01-27T08:49:40.1922341Z  ) -> DSYCLauncherResult<HashMap<String, HashMap<String, Option<LibrariesValue>>>> {
2026-01-27T08:49:40.1923311Z    let path = get_app_resource_filepath(app, "assets/game/natives.json")?;
2026-01-27T08:49:40.1923941Z -  let txt =
2026-01-27T08:49:40.1924840Z -    fs::read_to_string(&path).map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.1925758Z +  let txt = fs::read_to_string(&path)
2026-01-27T08:49:40.1926568Z +    .map_err(|e| DSYCLauncherError(format!("read natives.json failed: {e}")))?;
2026-01-27T08:49:40.1927621Z    let map: HashMap<String, HashMap<String, Option<LibrariesValue>>> = serde_json::from_str(&txt)
2026-01-27T08:49:40.1928827Z      .map_err(|e| DSYCLauncherError(format!("parse natives.json failed: {e}")))?;
2026-01-27T08:49:40.1929453Z    Ok(map)
2026-01-27T08:49:40.1955707Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:43:
2026-01-27T08:49:40.1956582Z  
2026-01-27T08:49:40.1956982Z    let int_path = meta["intermediary"]["maven"]
2026-01-27T08:49:40.1957449Z      .as_str()
2026-01-27T08:49:40.1958415Z -    .ok_or(DSYCLauncherError("meta missing intermediary maven".to_string()))?;
2026-01-27T08:49:40.1958954Z +    .ok_or(DSYCLauncherError(
2026-01-27T08:49:40.1959294Z +      "meta missing intermediary maven".to_string(),
2026-01-27T08:49:40.1959565Z +    ))?;
2026-01-27T08:49:40.1959714Z  
2026-01-27T08:49:40.1959976Z    let main_class = meta["launcherMeta"]["mainClass"]["client"]
2026-01-27T08:49:40.1960286Z      .as_str()
2026-01-27T08:49:40.1960807Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/loader/fabric.rs:136:
2026-01-27T08:49:40.1961308Z        .and_then(|s| s.to_str())
2026-01-27T08:49:40.1961535Z        .unwrap_or_default()
2026-01-27T08:49:40.1961735Z        .to_string();
2026-01-27T08:49:40.1962219Z -    fs::remove_file(&p).map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.1962671Z +    fs::remove_file(&p)
2026-01-27T08:49:40.1963092Z +      .map_err(|e| DSYCLauncherError(format!("Failed to remove {}: {}", name, e)))?;
2026-01-27T08:49:40.1963720Z    }
2026-01-27T08:49:40.1963863Z  
2026-01-27T08:49:40.1964008Z    Ok(())
2026-01-27T08:49:40.2105088Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/misc.rs:90:
2026-01-27T08:49:40.2106776Z    get_instance_subdir_paths(app, instance, &[directory_type]).and_then(|mut paths| paths.pop())
2026-01-27T08:49:40.2107721Z  }
2026-01-27T08:49:40.2108317Z  
2026-01-27T08:49:40.2109102Z -pub fn unify_instance_name(src_version_path: &PathBuf, tgt_name: &String) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.2109863Z +pub fn unify_instance_name(
2026-01-27T08:49:40.2110267Z +  src_version_path: &PathBuf,
2026-01-27T08:49:40.2110688Z +  tgt_name: &String,
2026-01-27T08:49:40.2111176Z +) -> DSYCLauncherResult<PathBuf> {
2026-01-27T08:49:40.2111685Z    if !sanitize_filename::is_sanitized(tgt_name) {
2026-01-27T08:49:40.2112266Z      return Err(InstanceError::InvalidNameError.into());
2026-01-27T08:49:40.2112702Z    }
2026-01-27T08:49:40.2179540Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/modpack/curseforge.rs:150:
2026-01-27T08:49:40.2180217Z        let project_id = file.project_id;
2026-01-27T08:49:40.2180460Z  
2026-01-27T08:49:40.2180622Z        async move {
2026-01-27T08:49:40.2181019Z -        let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.2181473Z -          .map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.2181794Z +        let curseforge_api_key =
2026-01-27T08:49:40.2182281Z +          env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| InstanceError::MissingApiKey)?;
2026-01-27T08:49:40.2182679Z  
2026-01-27T08:49:40.2182834Z          let class_id = {
2026-01-27T08:49:40.2183063Z            let project_resp = client
2026-01-27T08:49:40.2259459Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:73:
2026-01-27T08:49:40.2260369Z            valid_logo_file: None,
2026-01-27T08:49:40.2260645Z          })
2026-01-27T08:49:40.2260868Z        } else {
2026-01-27T08:49:40.2261365Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.2261888Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.2262304Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.2262647Z +        ))
2026-01-27T08:49:40.2262835Z        }
2026-01-27T08:49:40.2263022Z      }
2026-01-27T08:49:40.2263202Z    };
2026-01-27T08:49:40.2263912Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/forge.rs:142:
2026-01-27T08:49:40.2264975Z            valid_logo_file: None,
2026-01-27T08:49:40.2265434Z          })
2026-01-27T08:49:40.2265641Z        } else {
2026-01-27T08:49:40.2266110Z -        Err(DSYCLauncherError("no mods.toml or MANIFEST.MF found".to_string()))
2026-01-27T08:49:40.2266617Z +        Err(DSYCLauncherError(
2026-01-27T08:49:40.2267024Z +          "no mods.toml or MANIFEST.MF found".to_string(),
2026-01-27T08:49:40.2267360Z +        ))
2026-01-27T08:49:40.2267565Z        }
2026-01-27T08:49:40.2268106Z      }
2026-01-27T08:49:40.2268492Z    };
2026-01-27T08:49:40.2269197Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:33:
2026-01-27T08:49:40.2269906Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.2270225Z    };
2026-01-27T08:49:40.2270422Z    if meta.is_empty() {
2026-01-27T08:49:40.2270959Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.2271511Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.2271922Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.2272247Z +    ));
2026-01-27T08:49:40.2272429Z    }
2026-01-27T08:49:40.2272616Z    Ok(meta.remove(0))
2026-01-27T08:49:40.2272833Z  }
2026-01-27T08:49:40.2273452Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:40:
2026-01-27T08:49:40.2274028Z  
2026-01-27T08:49:40.2275088Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.2275728Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.2276039Z +  dir_path: &Path,
2026-01-27T08:49:40.2276381Z +) -> DSYCLauncherResult<LegacyForgeModMetadata> {
2026-01-27T08:49:40.2276838Z    let legacy_forge_file_path = dir_path.join("mcmod.info");
2026-01-27T08:49:40.2277354Z    let mut meta: Vec<LegacyForgeModMetadata> =
2026-01-27T08:49:40.2278267Z      match tokio::fs::read_to_string(legacy_forge_file_path).await {
2026-01-27T08:49:40.2279434Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/legacy_forge.rs:49:
2026-01-27T08:49:40.2280007Z        Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.2280277Z      };
2026-01-27T08:49:40.2280859Z    if meta.is_empty() {
2026-01-27T08:49:40.2281395Z -    return Err(DSYCLauncherError("len of LegacyForgeModMetadata is 0".to_string()));
2026-01-27T08:49:40.2281909Z +    return Err(DSYCLauncherError(
2026-01-27T08:49:40.2282430Z +      "len of LegacyForgeModMetadata is 0".to_string(),
2026-01-27T08:49:40.2282850Z +    ));
2026-01-27T08:49:40.2283069Z    }
2026-01-27T08:49:40.2283389Z    Ok(meta.remove(0))
2026-01-27T08:49:40.2283631Z  }
2026-01-27T08:49:40.2284214Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/mods/liteloader.rs:36:
2026-01-27T08:49:40.2284840Z    Ok(meta)
2026-01-27T08:49:40.2285092Z  }
2026-01-27T08:49:40.2285325Z  
2026-01-27T08:49:40.2285887Z -pub async fn get_mod_metadata_from_dir(dir_path: &Path) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.2286498Z +pub async fn get_mod_metadata_from_dir(
2026-01-27T08:49:40.2299988Z +  dir_path: &Path,
2026-01-27T08:49:40.2300311Z +) -> DSYCLauncherResult<LiteloaderModMetadata> {
2026-01-27T08:49:40.2300714Z    let liteloader_file_path = dir_path.join("litemod.json");
2026-01-27T08:49:40.2301138Z    let meta: LiteloaderModMetadata = serde_json::from_str(
2026-01-27T08:49:40.2301526Z      tokio::fs::read_to_string(liteloader_file_path)
2026-01-27T08:49:40.2302153Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:6:
2026-01-27T08:49:40.2302701Z  use std::path::{Path, PathBuf};
2026-01-27T08:49:40.2302937Z  use zip::ZipArchive;
2026-01-27T08:49:40.2303119Z  
2026-01-27T08:49:40.2303592Z -pub fn load_resourcepack_from_zip(path: &PathBuf) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.2304095Z +pub fn load_resourcepack_from_zip(
2026-01-27T08:49:40.2304346Z +  path: &PathBuf,
2026-01-27T08:49:40.2304636Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.2304971Z    let file = match fs::File::open(path) {
2026-01-27T08:49:40.2305223Z      Ok(val) => val,
2026-01-27T08:49:40.2305489Z      Err(e) => return Err(DSYCLauncherError::from(e)),
2026-01-27T08:49:40.2306087Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/helpers/resourcepack.rs:54:
2026-01-27T08:49:40.2306583Z    Ok((description, icon_src))
2026-01-27T08:49:40.2306790Z  }
2026-01-27T08:49:40.2306940Z  
2026-01-27T08:49:40.2307422Z -pub async fn load_resourcepack_from_dir(path: &Path) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.2308077Z +pub async fn load_resourcepack_from_dir(
2026-01-27T08:49:40.2308338Z +  path: &Path,
2026-01-27T08:49:40.2308633Z +) -> DSYCLauncherResult<(String, Option<RgbaImage>)> {
2026-01-27T08:49:40.2308954Z    let mut description = String::new();
2026-01-27T08:49:40.2309179Z  
2026-01-27T08:49:40.2309506Z    if let Ok(mut contents) = tokio::fs::read_to_string(path.join("pack.mcmeta")).await {
2026-01-27T08:49:40.2455902Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:194:
2026-01-27T08:49:40.2456768Z  }
2026-01-27T08:49:40.2456957Z  
2026-01-27T08:49:40.2457179Z  #[tauri::command]
2026-01-27T08:49:40.2458094Z -pub async fn reset_instance_game_config(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2459408Z +pub async fn reset_instance_game_config(
2026-01-27T08:49:40.2459765Z +  app: AppHandle,
2026-01-27T08:49:40.2460021Z +  instance_id: String,
2026-01-27T08:49:40.2460338Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2460624Z    let instance = {
2026-01-27T08:49:40.2461026Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.2461557Z      let mut state = binding.lock().unwrap();
2026-01-27T08:49:40.2462237Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:844:
2026-01-27T08:49:40.2462772Z  }
2026-01-27T08:49:40.2462956Z  
2026-01-27T08:49:40.2463145Z  #[tauri::command]
2026-01-27T08:49:40.2463788Z -pub fn create_launch_desktop_shortcut(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2464451Z +pub fn create_launch_desktop_shortcut(
2026-01-27T08:49:40.2464774Z +  app: AppHandle,
2026-01-27T08:49:40.2465015Z +  instance_id: String,
2026-01-27T08:49:40.2465326Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2465770Z    let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.2466175Z    let state = binding
2026-01-27T08:49:40.2466400Z      .lock()
2026-01-27T08:49:40.2466968Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/instance/commands.rs:1065:
2026-01-27T08:49:40.2467491Z  }
2026-01-27T08:49:40.2467668Z  
2026-01-27T08:49:40.2467996Z  #[tauri::command]
2026-01-27T08:49:40.2468592Z -pub async fn finish_mod_loader_install(app: AppHandle, instance_id: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2469126Z +pub async fn finish_mod_loader_install(
2026-01-27T08:49:40.2469379Z +  app: AppHandle,
2026-01-27T08:49:40.2469581Z +  instance_id: String,
2026-01-27T08:49:40.2469815Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.2470027Z    let instance = {
2026-01-27T08:49:40.2470325Z      let binding = app.state::<Mutex<HashMap<String, Instance>>>();
2026-01-27T08:49:40.2470685Z      let state = binding.lock()?;
2026-01-27T08:49:40.2590409Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:152:
2026-01-27T08:49:40.2591188Z  /// ```rust
2026-01-27T08:49:40.2591717Z  /// let mod_paths = get_files_with_regex(&mods_dir, &valid_extensions).unwrap_or_default();
2026-01-27T08:49:40.2592266Z  /// ```
2026-01-27T08:49:40.2592962Z -pub fn get_files_with_regex<P: AsRef<Path>>(path: P, pattern: &Regex) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.2593713Z +pub fn get_files_with_regex<P: AsRef<Path>>(
2026-01-27T08:49:40.2594075Z +  path: P,
2026-01-27T08:49:40.2594323Z +  pattern: &Regex,
2026-01-27T08:49:40.2594664Z +) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.2595151Z    let dir_entries = fs::read_dir(&path).map_err(|e| {
2026-01-27T08:49:40.2595599Z      let error_message = match e.kind() {
2026-01-27T08:49:40.2596109Z        io::ErrorKind::NotFound => "Path does not exist".to_string(),
2026-01-27T08:49:40.2596908Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:441:
2026-01-27T08:49:40.2597472Z    }
2026-01-27T08:49:40.2597672Z  }
2026-01-27T08:49:40.2598135Z  
2026-01-27T08:49:40.2598856Z -pub fn create_zip_from_dirs(paths: Vec<PathBuf>, zip_file_path: PathBuf) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.2599412Z +pub fn create_zip_from_dirs(
2026-01-27T08:49:40.2599680Z +  paths: Vec<PathBuf>,
2026-01-27T08:49:40.2599919Z +  zip_file_path: PathBuf,
2026-01-27T08:49:40.2600204Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.2600558Z    let zip_file = std::fs::File::create(&zip_file_path)
2026-01-27T08:49:40.2601078Z      .map_err(|e| DSYCLauncherError(format!("Failed to create zip file: {}", e)))?;
2026-01-27T08:49:40.2601555Z    let mut zip = ZipWriter::new(zip_file);
2026-01-27T08:49:40.2647085Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/web.rs:44:
2026-01-27T08:49:40.2648628Z        // According to the User-Agent requirements of mozilla and BMCLAPI, the User-Agent is set to start with ${NAME}/${VERSION}
2026-01-27T08:49:40.2649993Z        // https://github.com/MCLF-CN/docs/issues/2
2026-01-27T08:49:40.2650600Z        // https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Reference/Headers/User-Agent
2026-01-27T08:49:40.2651472Z -      if let Ok(header_value) = format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse() {
2026-01-27T08:49:40.2652071Z +      if let Ok(header_value) =
2026-01-27T08:49:40.2652575Z +        format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse()
2026-01-27T08:49:40.2653004Z +      {
2026-01-27T08:49:40.2653269Z          let mut headers = HeaderMap::new();
2026-01-27T08:49:40.2653647Z          headers.insert("User-Agent", header_value);
2026-01-27T08:49:40.2654050Z          builder = builder.default_headers(headers);
2026-01-27T08:49:40.2676857Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/web.rs:44:
2026-01-27T08:49:40.2677819Z        // According to the User-Agent requirements of mozilla and BMCLAPI, the User-Agent is set to start with ${NAME}/${VERSION}
2026-01-27T08:49:40.2678713Z        // https://github.com/MCLF-CN/docs/issues/2
2026-01-27T08:49:40.2679339Z        // https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Reference/Headers/User-Agent
2026-01-27T08:49:40.2680225Z -      if let Ok(header_value) = format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse() {
2026-01-27T08:49:40.2680818Z +      if let Ok(header_value) =
2026-01-27T08:49:40.2681326Z +        format!("DSYCLauncher/{}", &config.basic_info.launcher_version).parse()
2026-01-27T08:49:40.2681739Z +      {
2026-01-27T08:49:40.2682001Z          let mut headers = HeaderMap::new();
2026-01-27T08:49:40.2682380Z          headers.insert("User-Agent", header_value);
2026-01-27T08:49:40.2682782Z          builder = builder.default_headers(headers);
2026-01-27T08:49:40.2731838Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:152:
2026-01-27T08:49:40.2732673Z  /// ```rust
2026-01-27T08:49:40.2733173Z  /// let mod_paths = get_files_with_regex(&mods_dir, &valid_extensions).unwrap_or_default();
2026-01-27T08:49:40.2733654Z  /// ```
2026-01-27T08:49:40.2734262Z -pub fn get_files_with_regex<P: AsRef<Path>>(path: P, pattern: &Regex) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.2734945Z +pub fn get_files_with_regex<P: AsRef<Path>>(
2026-01-27T08:49:40.2735264Z +  path: P,
2026-01-27T08:49:40.2735494Z +  pattern: &Regex,
2026-01-27T08:49:40.2735808Z +) -> DSYCLauncherResult<Vec<PathBuf>> {
2026-01-27T08:49:40.2736223Z    let dir_entries = fs::read_dir(&path).map_err(|e| {
2026-01-27T08:49:40.2736618Z      let error_message = match e.kind() {
2026-01-27T08:49:40.2737072Z        io::ErrorKind::NotFound => "Path does not exist".to_string(),
2026-01-27T08:49:40.2737748Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/utils/fs.rs:441:
2026-01-27T08:49:40.2738560Z    }
2026-01-27T08:49:40.2738801Z  }
2026-01-27T08:49:40.2739023Z  
2026-01-27T08:49:40.2739670Z -pub fn create_zip_from_dirs(paths: Vec<PathBuf>, zip_file_path: PathBuf) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.2740311Z +pub fn create_zip_from_dirs(
2026-01-27T08:49:40.2740621Z +  paths: Vec<PathBuf>,
2026-01-27T08:49:40.2740910Z +  zip_file_path: PathBuf,
2026-01-27T08:49:40.2741245Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.2741654Z    let zip_file = std::fs::File::create(&zip_file_path)
2026-01-27T08:49:40.2742255Z      .map_err(|e| DSYCLauncherError(format!("Failed to create zip file: {}", e)))?;
2026-01-27T08:49:40.2742805Z    let mut zip = ZipWriter::new(zip_file);
2026-01-27T08:49:40.3000899Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:33:
2026-01-27T08:49:40.3001777Z  }
2026-01-27T08:49:40.3002039Z  
2026-01-27T08:49:40.3002355Z  #[tauri::command]
2026-01-27T08:49:40.3003317Z -pub fn update_launcher_config(app: AppHandle, key_path: String, value: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3004383Z +pub fn update_launcher_config(
2026-01-27T08:49:40.3004680Z +  app: AppHandle,
2026-01-27T08:49:40.3005050Z +  key_path: String,
2026-01-27T08:49:40.3005300Z +  value: String,
2026-01-27T08:49:40.3005576Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3005979Z    let config_binding = app.state::<Mutex<LauncherConfig>>();
2026-01-27T08:49:40.3006428Z    let mut config_state = config_binding.lock()?;
2026-01-27T08:49:40.3006858Z    let key_path = camel_to_snake_case(key_path.as_str());
2026-01-27T08:49:40.3007591Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:369:
2026-01-27T08:49:40.3008347Z  }
2026-01-27T08:49:40.3008516Z  
2026-01-27T08:49:40.3008702Z  #[tauri::command]
2026-01-27T08:49:40.3009354Z -pub async fn download_launcher_update(app: AppHandle, version: VersionMetaInfo) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3010020Z +pub async fn download_launcher_update(
2026-01-27T08:49:40.3010303Z +  app: AppHandle,
2026-01-27T08:49:40.3010518Z +  version: VersionMetaInfo,
2026-01-27T08:49:40.3010792Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3011159Z    if version.version.is_empty() || version.version == "up2date" {
2026-01-27T08:49:40.3011490Z      Ok(())
2026-01-27T08:49:40.3011661Z    } else {
2026-01-27T08:49:40.3142592Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:33:
2026-01-27T08:49:40.3143456Z  }
2026-01-27T08:49:40.3143661Z  
2026-01-27T08:49:40.3143892Z  #[tauri::command]
2026-01-27T08:49:40.3144637Z -pub fn update_launcher_config(app: AppHandle, key_path: String, value: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3145388Z +pub fn update_launcher_config(
2026-01-27T08:49:40.3145709Z +  app: AppHandle,
2026-01-27T08:49:40.3145976Z +  key_path: String,
2026-01-27T08:49:40.3146240Z +  value: String,
2026-01-27T08:49:40.3146540Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3147003Z    let config_binding = app.state::<Mutex<LauncherConfig>>();
2026-01-27T08:49:40.3147543Z    let mut config_state = config_binding.lock()?;
2026-01-27T08:49:40.3148416Z    let key_path = camel_to_snake_case(key_path.as_str());
2026-01-27T08:49:40.3149277Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launcher_config/commands.rs:369:
2026-01-27T08:49:40.3149900Z  }
2026-01-27T08:49:40.3150072Z  
2026-01-27T08:49:40.3150256Z  #[tauri::command]
2026-01-27T08:49:40.3150925Z -pub async fn download_launcher_update(app: AppHandle, version: VersionMetaInfo) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3151586Z +pub async fn download_launcher_update(
2026-01-27T08:49:40.3151888Z +  app: AppHandle,
2026-01-27T08:49:40.3152136Z +  version: VersionMetaInfo,
2026-01-27T08:49:40.3152447Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3152850Z    if version.version.is_empty() || version.version == "up2date" {
2026-01-27T08:49:40.3153231Z      Ok(())
2026-01-27T08:49:40.3153415Z    } else {
2026-01-27T08:49:40.3264467Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:2:
2026-01-27T08:49:40.3265819Z  use crate::tasks::download::DownloadTask;
2026-01-27T08:49:40.3266576Z  use crate::tasks::events::GEventStatus;
2026-01-27T08:49:40.3267313Z  use crate::tasks::monitor::TaskMonitor;
2026-01-27T08:49:40.3268715Z -use crate::tasks::{PTaskGroupDesc, PTaskParam, DSYCLauncherFutureDesc, THandle};
2026-01-27T08:49:40.3269947Z +use crate::tasks::{DSYCLauncherFutureDesc, PTaskGroupDesc, PTaskParam, THandle};
2026-01-27T08:49:40.3270858Z  use crate::utils::fs::extract_filename;
2026-01-27T08:49:40.3271461Z  use std::pin::Pin;
2026-01-27T08:49:40.3271812Z  use std::time::Duration;
2026-01-27T08:49:40.3272524Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:76:
2026-01-27T08:49:40.3273207Z  }
2026-01-27T08:49:40.3273452Z  
2026-01-27T08:49:40.3273721Z  #[tauri::command]
2026-01-27T08:49:40.3274495Z -pub fn set_transient_task_state(app: AppHandle, task_id: u32, state: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3275733Z +pub fn set_transient_task_state(
2026-01-27T08:49:40.3276141Z +  app: AppHandle,
2026-01-27T08:49:40.3276675Z +  task_id: u32,
2026-01-27T08:49:40.3277021Z +  state: String,
2026-01-27T08:49:40.3277426Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3278203Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:40.3278713Z    monitor.set_transient_task(app.clone(), task_id, state);
2026-01-27T08:49:40.3279064Z    Ok(())
2026-01-27T08:49:40.3279577Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:131:
2026-01-27T08:49:40.3280078Z  }
2026-01-27T08:49:40.3280249Z  
2026-01-27T08:49:40.3280430Z  #[tauri::command]
2026-01-27T08:49:40.3281047Z -pub async fn resume_progressive_task_group(app: AppHandle, task_group: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3281593Z +pub async fn resume_progressive_task_group(
2026-01-27T08:49:40.3281863Z +  app: AppHandle,
2026-01-27T08:49:40.3282058Z +  task_group: String,
2026-01-27T08:49:40.3282286Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3282608Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:40.3282988Z    monitor.resume_progressive_task_group(task_group).await;
2026-01-27T08:49:40.3283277Z    Ok(())
2026-01-27T08:49:40.3422669Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:2:
2026-01-27T08:49:40.3423786Z  use crate::tasks::download::DownloadTask;
2026-01-27T08:49:40.3424416Z  use crate::tasks::events::GEventStatus;
2026-01-27T08:49:40.3425027Z  use crate::tasks::monitor::TaskMonitor;
2026-01-27T08:49:40.3426046Z -use crate::tasks::{PTaskGroupDesc, PTaskParam, DSYCLauncherFutureDesc, THandle};
2026-01-27T08:49:40.3426837Z +use crate::tasks::{DSYCLauncherFutureDesc, PTaskGroupDesc, PTaskParam, THandle};
2026-01-27T08:49:40.3427374Z  use crate::utils::fs::extract_filename;
2026-01-27T08:49:40.3427686Z  use std::pin::Pin;
2026-01-27T08:49:40.3428252Z  use std::time::Duration;
2026-01-27T08:49:40.3428877Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:76:
2026-01-27T08:49:40.3429421Z  }
2026-01-27T08:49:40.3429612Z  
2026-01-27T08:49:40.3429805Z  #[tauri::command]
2026-01-27T08:49:40.3430489Z -pub fn set_transient_task_state(app: AppHandle, task_id: u32, state: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3431064Z +pub fn set_transient_task_state(
2026-01-27T08:49:40.3431336Z +  app: AppHandle,
2026-01-27T08:49:40.3431529Z +  task_id: u32,
2026-01-27T08:49:40.3431737Z +  state: String,
2026-01-27T08:49:40.3431990Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3432334Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:40.3432763Z    monitor.set_transient_task(app.clone(), task_id, state);
2026-01-27T08:49:40.3433088Z    Ok(())
2026-01-27T08:49:40.3433573Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/tasks/commands.rs:131:
2026-01-27T08:49:40.3434033Z  }
2026-01-27T08:49:40.3434188Z  
2026-01-27T08:49:40.3434359Z  #[tauri::command]
2026-01-27T08:49:40.3434962Z -pub async fn resume_progressive_task_group(app: AppHandle, task_group: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3435596Z +pub async fn resume_progressive_task_group(
2026-01-27T08:49:40.3435902Z +  app: AppHandle,
2026-01-27T08:49:40.3436115Z +  task_group: String,
2026-01-27T08:49:40.3436378Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.3436708Z    let monitor = app.state::<Pin<Box<TaskMonitor>>>();
2026-01-27T08:49:40.3437131Z    monitor.resume_progressive_task_group(task_group).await;
2026-01-27T08:49:40.3437465Z    Ok(())
2026-01-27T08:49:40.3528062Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:21:
2026-01-27T08:49:40.3529198Z    T: serde::de::DeserializeOwned,
2026-01-27T08:49:40.3529694Z    P: serde::Serialize,
2026-01-27T08:49:40.3530070Z  {
2026-01-27T08:49:40.3530679Z -  let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3531524Z -    .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3532587Z +  let curseforge_api_key =
2026-01-27T08:49:40.3533805Z +    env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3534578Z  
2026-01-27T08:49:40.3535013Z    let request_builder = match request_type {
2026-01-27T08:49:40.3535914Z      OtherResourceRequestType::GetWithParams(params) => client.get(url).query(params),
2026-01-27T08:49:40.3537355Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:524:
2026-01-27T08:49:40.3538500Z    resource_id: &str,
2026-01-27T08:49:40.3538953Z  ) -> DSYCLauncherResult<Option<String>> {
2026-01-27T08:49:40.3539448Z    let result = async {
2026-01-27T08:49:40.3540157Z -    let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3540977Z -      .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3541528Z +    let curseforge_api_key =
2026-01-27T08:49:40.3542420Z +      env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3543191Z  
2026-01-27T08:49:40.3543916Z      let url = get_curseforge_api(OtherResourceApiEndpoint::TranslateDesc, Some(resource_id))?;
2026-01-27T08:49:40.3544803Z      let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.3572882Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:21:
2026-01-27T08:49:40.3573857Z    T: serde::de::DeserializeOwned,
2026-01-27T08:49:40.3574307Z    P: serde::Serialize,
2026-01-27T08:49:40.3574658Z  {
2026-01-27T08:49:40.3575252Z -  let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3576035Z -    .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3576549Z +  let curseforge_api_key =
2026-01-27T08:49:40.3577384Z +    env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3578316Z  
2026-01-27T08:49:40.3578683Z    let request_builder = match request_type {
2026-01-27T08:49:40.3579553Z      OtherResourceRequestType::GetWithParams(params) => client.get(url).query(params),
2026-01-27T08:49:40.3580933Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:524:
2026-01-27T08:49:40.3581793Z    resource_id: &str,
2026-01-27T08:49:40.3582221Z  ) -> DSYCLauncherResult<Option<String>> {
2026-01-27T08:49:40.3582683Z    let result = async {
2026-01-27T08:49:40.3583363Z -    let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3584164Z -      .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3584704Z +    let curseforge_api_key =
2026-01-27T08:49:40.3585624Z +      env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3586325Z  
2026-01-27T08:49:40.3587006Z      let url = get_curseforge_api(OtherResourceApiEndpoint::TranslateDesc, Some(resource_id))?;
2026-01-27T08:49:40.3588140Z      let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.3623071Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/misc.rs:26:
2026-01-27T08:49:40.3623925Z  }
2026-01-27T08:49:40.3624187Z  
2026-01-27T08:49:40.3624573Z  // https://bmclapidoc.bangbang93.com/
2026-01-27T08:49:40.3625653Z -pub fn get_download_api(source: SourceType, resource_type: ResourceType) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.3626567Z +pub fn get_download_api(
2026-01-27T08:49:40.3626984Z +  source: SourceType,
2026-01-27T08:49:40.3627438Z +  resource_type: ResourceType,
2026-01-27T08:49:40.3628224Z +) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.3628649Z    match source {
2026-01-27T08:49:40.3629123Z      SourceType::Official => match resource_type {
2026-01-27T08:49:40.3630264Z        ResourceType::VersionManifest => Ok(Url::parse("https://launchermeta.mojang.com/mc/game/version_manifest.json")?),
2026-01-27T08:49:40.3910833Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:21:
2026-01-27T08:49:40.3912414Z    T: serde::de::DeserializeOwned,
2026-01-27T08:49:40.3912818Z    P: serde::Serialize,
2026-01-27T08:49:40.3913105Z  {
2026-01-27T08:49:40.3913636Z -  let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3914311Z -    .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3914770Z +  let curseforge_api_key =
2026-01-27T08:49:40.3915499Z +    env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3916130Z  
2026-01-27T08:49:40.3916452Z    let request_builder = match request_type {
2026-01-27T08:49:40.3917175Z      OtherResourceRequestType::GetWithParams(params) => client.get(url).query(params),
2026-01-27T08:49:40.3918770Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:524:
2026-01-27T08:49:40.3919517Z    resource_id: &str,
2026-01-27T08:49:40.3919875Z  ) -> DSYCLauncherResult<Option<String>> {
2026-01-27T08:49:40.3920281Z    let result = async {
2026-01-27T08:49:40.3920866Z -    let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.3921465Z -      .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3921830Z +    let curseforge_api_key =
2026-01-27T08:49:40.3922423Z +      env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.3922919Z  
2026-01-27T08:49:40.3923401Z      let url = get_curseforge_api(OtherResourceApiEndpoint::TranslateDesc, Some(resource_id))?;
2026-01-27T08:49:40.3924005Z      let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4022791Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/misc.rs:26:
2026-01-27T08:49:40.4023422Z  }
2026-01-27T08:49:40.4023593Z  
2026-01-27T08:49:40.4023846Z  // https://bmclapidoc.bangbang93.com/
2026-01-27T08:49:40.4024567Z -pub fn get_download_api(source: SourceType, resource_type: ResourceType) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.4025182Z +pub fn get_download_api(
2026-01-27T08:49:40.4025461Z +  source: SourceType,
2026-01-27T08:49:40.4025770Z +  resource_type: ResourceType,
2026-01-27T08:49:40.4026096Z +) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.4026362Z    match source {
2026-01-27T08:49:40.4026667Z      SourceType::Official => match resource_type {
2026-01-27T08:49:40.4027421Z        ResourceType::VersionManifest => Ok(Url::parse("https://launchermeta.mojang.com/mc/game/version_manifest.json")?),
2026-01-27T08:49:40.4200423Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:21:
2026-01-27T08:49:40.4201771Z    T: serde::de::DeserializeOwned,
2026-01-27T08:49:40.4202336Z    P: serde::Serialize,
2026-01-27T08:49:40.4202767Z  {
2026-01-27T08:49:40.4203564Z -  let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.4204595Z -    .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.4205152Z +  let curseforge_api_key =
2026-01-27T08:49:40.4205897Z +    env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.4206515Z  
2026-01-27T08:49:40.4206836Z    let request_builder = match request_type {
2026-01-27T08:49:40.4207579Z      OtherResourceRequestType::GetWithParams(params) => client.get(url).query(params),
2026-01-27T08:49:40.4209177Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/curseforge/misc.rs:524:
2026-01-27T08:49:40.4209924Z    resource_id: &str,
2026-01-27T08:49:40.4210292Z  ) -> DSYCLauncherResult<Option<String>> {
2026-01-27T08:49:40.4210679Z    let result = async {
2026-01-27T08:49:40.4211257Z -    let curseforge_api_key = env::var("DSYCLauncher_CURSEFORGE_API_KEY")
2026-01-27T08:49:40.4211932Z -      .map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.4212285Z +    let curseforge_api_key =
2026-01-27T08:49:40.4212806Z +      env::var("DSYCLauncher_CURSEFORGE_API_KEY").map_err(|_| ResourceError::MissingApiKey)?;
2026-01-27T08:49:40.4213654Z  
2026-01-27T08:49:40.4214216Z      let url = get_curseforge_api(OtherResourceApiEndpoint::TranslateDesc, Some(resource_id))?;
2026-01-27T08:49:40.4214750Z      let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4314277Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/resource/helpers/misc.rs:26:
2026-01-27T08:49:40.4315324Z  }
2026-01-27T08:49:40.4315658Z  
2026-01-27T08:49:40.4316121Z  // https://bmclapidoc.bangbang93.com/
2026-01-27T08:49:40.4317478Z -pub fn get_download_api(source: SourceType, resource_type: ResourceType) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.4318605Z +pub fn get_download_api(
2026-01-27T08:49:40.4318942Z +  source: SourceType,
2026-01-27T08:49:40.4319303Z +  resource_type: ResourceType,
2026-01-27T08:49:40.4319698Z +) -> DSYCLauncherResult<Url> {
2026-01-27T08:49:40.4320028Z    match source {
2026-01-27T08:49:40.4320416Z      SourceType::Official => match resource_type {
2026-01-27T08:49:40.4321384Z        ResourceType::VersionManifest => Ok(Url::parse("https://launchermeta.mojang.com/mc/game/version_manifest.json")?),
2026-01-27T08:49:40.4440044Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:11:
2026-01-27T08:49:40.4441211Z  use tauri::AppHandle;
2026-01-27T08:49:40.4441654Z  use uuid::Uuid;
2026-01-27T08:49:40.4442038Z  
2026-01-27T08:49:40.4443165Z -pub fn load_preset_skin(app: &AppHandle, preset_role: PresetRole) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.4443952Z +pub fn load_preset_skin(
2026-01-27T08:49:40.4444288Z +  app: &AppHandle,
2026-01-27T08:49:40.4444597Z +  preset_role: PresetRole,
2026-01-27T08:49:40.4445017Z +) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.4445774Z    let texture_path = get_app_resource_filepath(app, &format!("assets/skins/{}.png", preset_role))
2026-01-27T08:49:40.4446527Z      .map_err(|_| AccountError::TextureError)?;
2026-01-27T08:49:40.4446910Z  
2026-01-27T08:49:40.4447681Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:29:
2026-01-27T08:49:40.4448685Z    }])
2026-01-27T08:49:40.4448910Z  }
2026-01-27T08:49:40.4449117Z  
2026-01-27T08:49:40.4449867Z -pub async fn login(app: &AppHandle, username: String, raw_uuid: String) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4450605Z +pub async fn login(
2026-01-27T08:49:40.4450903Z +  app: &AppHandle,
2026-01-27T08:49:40.4451194Z +  username: String,
2026-01-27T08:49:40.4451474Z +  raw_uuid: String,
2026-01-27T08:49:40.4451838Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4452385Z    let name_with_prefix = format!("OfflinePlayer:{}", username);
2026-01-27T08:49:40.4452868Z    let uuid = if let Ok(id) = Uuid::parse_str(&raw_uuid) {
2026-01-27T08:49:40.4453202Z      id
2026-01-27T08:49:40.4518141Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:75:
2026-01-27T08:49:40.4519443Z    Ok(response["Token"].as_str().unwrap_or("").to_string())
2026-01-27T08:49:40.4520080Z  }
2026-01-27T08:49:40.4520398Z  
2026-01-27T08:49:40.4521264Z -async fn fetch_xsts_token(app: &AppHandle, xbl_token: String) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4521905Z +async fn fetch_xsts_token(
2026-01-27T08:49:40.4522243Z +  app: &AppHandle,
2026-01-27T08:49:40.4522538Z +  xbl_token: String,
2026-01-27T08:49:40.4522885Z +) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4523323Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4523655Z  
2026-01-27T08:49:40.4523856Z    let response = client
2026-01-27T08:49:40.4524591Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:206:
2026-01-27T08:49:40.4525220Z    )
2026-01-27T08:49:40.4525408Z  }
2026-01-27T08:49:40.4525596Z  
2026-01-27T08:49:40.4526250Z -pub async fn login(app: &AppHandle, auth_info: DeviceAuthResponseInfo) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4527291Z +pub async fn login(
2026-01-27T08:49:40.4527569Z +  app: &AppHandle,
2026-01-27T08:49:40.4528371Z +  auth_info: DeviceAuthResponseInfo,
2026-01-27T08:49:40.4528808Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4529224Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4529687Z    let sender = client.post(OAUTH_TOKEN_ENDPOINT).form(&[
2026-01-27T08:49:40.4530104Z      ("client_id", CLIENT_ID),
2026-01-27T08:49:40.4544170Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:75:
2026-01-27T08:49:40.4545146Z    Ok(response["Token"].as_str().unwrap_or("").to_string())
2026-01-27T08:49:40.4545625Z  }
2026-01-27T08:49:40.4545860Z  
2026-01-27T08:49:40.4546684Z -async fn fetch_xsts_token(app: &AppHandle, xbl_token: String) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4547197Z +async fn fetch_xsts_token(
2026-01-27T08:49:40.4547418Z +  app: &AppHandle,
2026-01-27T08:49:40.4547616Z +  xbl_token: String,
2026-01-27T08:49:40.4548134Z +) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4548535Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4548789Z  
2026-01-27T08:49:40.4548947Z    let response = client
2026-01-27T08:49:40.4549494Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:206:
2026-01-27T08:49:40.4550003Z    )
2026-01-27T08:49:40.4550143Z  }
2026-01-27T08:49:40.4550285Z  
2026-01-27T08:49:40.4550770Z -pub async fn login(app: &AppHandle, auth_info: DeviceAuthResponseInfo) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4551255Z +pub async fn login(
2026-01-27T08:49:40.4551465Z +  app: &AppHandle,
2026-01-27T08:49:40.4551701Z +  auth_info: DeviceAuthResponseInfo,
2026-01-27T08:49:40.4552008Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4552318Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4552666Z    let sender = client.post(OAUTH_TOKEN_ENDPOINT).form(&[
2026-01-27T08:49:40.4552986Z      ("client_id", CLIENT_ID),
2026-01-27T08:49:40.4599468Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:1:
2026-01-27T08:49:40.4600921Z  pub static AUTHLIB_INJECTOR_JAR_NAME: &str = "authlib-injector.jar";
2026-01-27T08:49:40.4601842Z -pub static PRESET_AUTH_SERVERS: [&str; 1] = [
2026-01-27T08:49:40.4602531Z -  "https://littleskin.cn/api/yggdrasil",
2026-01-27T08:49:40.4602804Z -];
2026-01-27T08:49:40.4603231Z +pub static PRESET_AUTH_SERVERS: [&str; 1] = ["https://littleskin.cn/api/yggdrasil"];
2026-01-27T08:49:40.4603658Z  pub static SCOPE: &str =
2026-01-27T08:49:40.4604088Z    "openid offline_access Yggdrasil.PlayerProfiles.Select Yggdrasil.Server.Join";
2026-01-27T08:49:40.4604497Z  
2026-01-27T08:49:40.4605074Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:8:
2026-01-27T08:49:40.4605706Z -pub static CLIENT_IDS: [(&str, &str); 1] = [
2026-01-27T08:49:40.4606009Z -  ("littleskin.cn", "1014"),
2026-01-27T08:49:40.4606228Z -];
2026-01-27T08:49:40.4606579Z +pub static CLIENT_IDS: [(&str, &str); 1] = [("littleskin.cn", "1014")];
2026-01-27T08:49:40.4606917Z  
2026-01-27T08:49:40.4659710Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/import/hmcl.rs:64:
2026-01-27T08:49:40.4660613Z    ThirdParty(HmclThirdPartyAccount),
2026-01-27T08:49:40.4661031Z  }
2026-01-27T08:49:40.4661279Z  
2026-01-27T08:49:40.4662126Z -async fn offline_to_player(app: &AppHandle, acc: &HmclOfflineAccount) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4662728Z +async fn offline_to_player(
2026-01-27T08:49:40.4662965Z +  app: &AppHandle,
2026-01-27T08:49:40.4663174Z +  acc: &HmclOfflineAccount,
2026-01-27T08:49:40.4663461Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4663927Z    let uuid = uuid::Uuid::parse_str(&acc.uuid).map_err(|_| AccountError::ParseError)?;
2026-01-27T08:49:40.4664430Z    let textures = load_preset_skin(app, PresetRole::Steve)?;
2026-01-27T08:49:40.4665128Z    Ok(
2026-01-27T08:49:40.4683722Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:75:
2026-01-27T08:49:40.4684973Z    Ok(response["Token"].as_str().unwrap_or("").to_string())
2026-01-27T08:49:40.4685577Z  }
2026-01-27T08:49:40.4685867Z  
2026-01-27T08:49:40.4686835Z -async fn fetch_xsts_token(app: &AppHandle, xbl_token: String) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4687452Z +async fn fetch_xsts_token(
2026-01-27T08:49:40.4687729Z +  app: &AppHandle,
2026-01-27T08:49:40.4688309Z +  xbl_token: String,
2026-01-27T08:49:40.4688640Z +) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.4689054Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4689365Z  
2026-01-27T08:49:40.4689567Z    let response = client
2026-01-27T08:49:40.4690257Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:206:
2026-01-27T08:49:40.4690852Z    )
2026-01-27T08:49:40.4691025Z  }
2026-01-27T08:49:40.4691198Z  
2026-01-27T08:49:40.4691826Z -pub async fn login(app: &AppHandle, auth_info: DeviceAuthResponseInfo) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4692463Z +pub async fn login(
2026-01-27T08:49:40.4692726Z +  app: &AppHandle,
2026-01-27T08:49:40.4692983Z +  auth_info: DeviceAuthResponseInfo,
2026-01-27T08:49:40.4693308Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4693629Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.4694000Z    let sender = client.post(OAUTH_TOKEN_ENDPOINT).form(&[
2026-01-27T08:49:40.4694334Z      ("client_id", CLIENT_ID),
2026-01-27T08:49:40.4696837Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:11:
2026-01-27T08:49:40.4697656Z  use tauri::AppHandle;
2026-01-27T08:49:40.4698176Z  use uuid::Uuid;
2026-01-27T08:49:40.4698457Z  
2026-01-27T08:49:40.4699293Z -pub fn load_preset_skin(app: &AppHandle, preset_role: PresetRole) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.4699878Z +pub fn load_preset_skin(
2026-01-27T08:49:40.4700117Z +  app: &AppHandle,
2026-01-27T08:49:40.4700334Z +  preset_role: PresetRole,
2026-01-27T08:49:40.4700618Z +) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.4701135Z    let texture_path = get_app_resource_filepath(app, &format!("assets/skins/{}.png", preset_role))
2026-01-27T08:49:40.4701670Z      .map_err(|_| AccountError::TextureError)?;
2026-01-27T08:49:40.4701929Z  
2026-01-27T08:49:40.4702434Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:29:
2026-01-27T08:49:40.4702921Z    }])
2026-01-27T08:49:40.4703072Z  }
2026-01-27T08:49:40.4703219Z  
2026-01-27T08:49:40.4703702Z -pub async fn login(app: &AppHandle, username: String, raw_uuid: String) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4704180Z +pub async fn login(
2026-01-27T08:49:40.4704388Z +  app: &AppHandle,
2026-01-27T08:49:40.4704573Z +  username: String,
2026-01-27T08:49:40.4704766Z +  raw_uuid: String,
2026-01-27T08:49:40.4705015Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4705387Z    let name_with_prefix = format!("OfflinePlayer:{}", username);
2026-01-27T08:49:40.4705786Z    let uuid = if let Ok(id) = Uuid::parse_str(&raw_uuid) {
2026-01-27T08:49:40.4706064Z      id
2026-01-27T08:49:40.4736883Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/import/hmcl.rs:64:
2026-01-27T08:49:40.4737686Z    ThirdParty(HmclThirdPartyAccount),
2026-01-27T08:49:40.4738297Z  }
2026-01-27T08:49:40.4738488Z  
2026-01-27T08:49:40.4739125Z -async fn offline_to_player(app: &AppHandle, acc: &HmclOfflineAccount) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4739748Z +async fn offline_to_player(
2026-01-27T08:49:40.4740038Z +  app: &AppHandle,
2026-01-27T08:49:40.4740299Z +  acc: &HmclOfflineAccount,
2026-01-27T08:49:40.4740652Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4741194Z    let uuid = uuid::Uuid::parse_str(&acc.uuid).map_err(|_| AccountError::ParseError)?;
2026-01-27T08:49:40.4742255Z    let textures = load_preset_skin(app, PresetRole::Steve)?;
2026-01-27T08:49:40.4742627Z    Ok(
2026-01-27T08:49:40.4757315Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/import/hmcl.rs:64:
2026-01-27T08:49:40.4758272Z    ThirdParty(HmclThirdPartyAccount),
2026-01-27T08:49:40.4758522Z  }
2026-01-27T08:49:40.4758660Z  
2026-01-27T08:49:40.4759154Z -async fn offline_to_player(app: &AppHandle, acc: &HmclOfflineAccount) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4759650Z +async fn offline_to_player(
2026-01-27T08:49:40.4759879Z +  app: &AppHandle,
2026-01-27T08:49:40.4760093Z +  acc: &HmclOfflineAccount,
2026-01-27T08:49:40.4760361Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.4760797Z    let uuid = uuid::Uuid::parse_str(&acc.uuid).map_err(|_| AccountError::ParseError)?;
2026-01-27T08:49:40.4761279Z    let textures = load_preset_skin(app, PresetRole::Steve)?;
2026-01-27T08:49:40.4761575Z    Ok(
2026-01-27T08:49:40.4824124Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:1:
2026-01-27T08:49:40.4825198Z  pub static AUTHLIB_INJECTOR_JAR_NAME: &str = "authlib-injector.jar";
2026-01-27T08:49:40.4825731Z -pub static PRESET_AUTH_SERVERS: [&str; 1] = [
2026-01-27T08:49:40.4826162Z -  "https://littleskin.cn/api/yggdrasil",
2026-01-27T08:49:40.4826472Z -];
2026-01-27T08:49:40.4826951Z +pub static PRESET_AUTH_SERVERS: [&str; 1] = ["https://littleskin.cn/api/yggdrasil"];
2026-01-27T08:49:40.4827444Z  pub static SCOPE: &str =
2026-01-27T08:49:40.4828300Z    "openid offline_access Yggdrasil.PlayerProfiles.Select Yggdrasil.Server.Join";
2026-01-27T08:49:40.4828794Z  
2026-01-27T08:49:40.4829467Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:8:
2026-01-27T08:49:40.4830191Z -pub static CLIENT_IDS: [(&str, &str); 1] = [
2026-01-27T08:49:40.4830551Z -  ("littleskin.cn", "1014"),
2026-01-27T08:49:40.4830820Z -];
2026-01-27T08:49:40.4831220Z +pub static CLIENT_IDS: [(&str, &str); 1] = [("littleskin.cn", "1014")];
2026-01-27T08:49:40.4831612Z  
2026-01-27T08:49:40.4911097Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:1:
2026-01-27T08:49:40.4913145Z  pub static AUTHLIB_INJECTOR_JAR_NAME: &str = "authlib-injector.jar";
2026-01-27T08:49:40.4914011Z -pub static PRESET_AUTH_SERVERS: [&str; 1] = [
2026-01-27T08:49:40.4914471Z -  "https://littleskin.cn/api/yggdrasil",
2026-01-27T08:49:40.4914809Z -];
2026-01-27T08:49:40.4915331Z +pub static PRESET_AUTH_SERVERS: [&str; 1] = ["https://littleskin.cn/api/yggdrasil"];
2026-01-27T08:49:40.4915863Z  pub static SCOPE: &str =
2026-01-27T08:49:40.4916394Z    "openid offline_access Yggdrasil.PlayerProfiles.Select Yggdrasil.Server.Join";
2026-01-27T08:49:40.4916903Z  
2026-01-27T08:49:40.4917629Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:8:
2026-01-27T08:49:40.4918701Z -pub static CLIENT_IDS: [(&str, &str); 1] = [
2026-01-27T08:49:40.4919073Z -  ("littleskin.cn", "1014"),
2026-01-27T08:49:40.4919344Z -];
2026-01-27T08:49:40.4919774Z +pub static CLIENT_IDS: [(&str, &str); 1] = [("littleskin.cn", "1014")];
2026-01-27T08:49:40.4920197Z  
2026-01-27T08:49:40.5024147Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/commands.rs:53:
2026-01-27T08:49:40.5024918Z  }
2026-01-27T08:49:40.5025113Z  
2026-01-27T08:49:40.5025341Z  #[tauri::command]
2026-01-27T08:49:40.5026032Z -pub async fn add_player_offline(app: AppHandle, username: String, uuid: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.5026704Z +pub async fn add_player_offline(
2026-01-27T08:49:40.5027011Z +  app: AppHandle,
2026-01-27T08:49:40.5027249Z +  username: String,
2026-01-27T08:49:40.5027479Z +  uuid: String,
2026-01-27T08:49:40.5027756Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.5028564Z    let new_player = offline::login(&app, username, uuid).await?;
2026-01-27T08:49:40.5029431Z  
2026-01-27T08:49:40.5029910Z    let account_binding = app.state::<Mutex<AccountInfo>>();
2026-01-27T08:49:40.5041216Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:1:
2026-01-27T08:49:40.5042233Z  pub static AUTHLIB_INJECTOR_JAR_NAME: &str = "authlib-injector.jar";
2026-01-27T08:49:40.5042811Z -pub static PRESET_AUTH_SERVERS: [&str; 1] = [
2026-01-27T08:49:40.5043270Z -  "https://littleskin.cn/api/yggdrasil",
2026-01-27T08:49:40.5043601Z -];
2026-01-27T08:49:40.5044122Z +pub static PRESET_AUTH_SERVERS: [&str; 1] = ["https://littleskin.cn/api/yggdrasil"];
2026-01-27T08:49:40.5044660Z  pub static SCOPE: &str =
2026-01-27T08:49:40.5045195Z    "openid offline_access Yggdrasil.PlayerProfiles.Select Yggdrasil.Server.Join";
2026-01-27T08:49:40.5045712Z  
2026-01-27T08:49:40.5046464Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/authlib_injector/constants.rs:8:
2026-01-27T08:49:40.5047290Z -pub static CLIENT_IDS: [(&str, &str); 1] = [
2026-01-27T08:49:40.5047669Z -  ("littleskin.cn", "1014"),
2026-01-27T08:49:40.5048215Z -];
2026-01-27T08:49:40.5048661Z +pub static CLIENT_IDS: [(&str, &str); 1] = [("littleskin.cn", "1014")];
2026-01-27T08:49:40.5049097Z  
2026-01-27T08:49:40.5101476Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/import/hmcl.rs:64:
2026-01-27T08:49:40.5102283Z    ThirdParty(HmclThirdPartyAccount),
2026-01-27T08:49:40.5102597Z  }
2026-01-27T08:49:40.5102770Z  
2026-01-27T08:49:40.5103378Z -async fn offline_to_player(app: &AppHandle, acc: &HmclOfflineAccount) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5103984Z +async fn offline_to_player(
2026-01-27T08:49:40.5104270Z +  app: &AppHandle,
2026-01-27T08:49:40.5104534Z +  acc: &HmclOfflineAccount,
2026-01-27T08:49:40.5104869Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5105430Z    let uuid = uuid::Uuid::parse_str(&acc.uuid).map_err(|_| AccountError::ParseError)?;
2026-01-27T08:49:40.5106060Z    let textures = load_preset_skin(app, PresetRole::Steve)?;
2026-01-27T08:49:40.5106416Z    Ok(
2026-01-27T08:49:40.5125301Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:75:
2026-01-27T08:49:40.5126130Z    Ok(response["Token"].as_str().unwrap_or("").to_string())
2026-01-27T08:49:40.5126453Z  }
2026-01-27T08:49:40.5126614Z  
2026-01-27T08:49:40.5127145Z -async fn fetch_xsts_token(app: &AppHandle, xbl_token: String) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.5127687Z +async fn fetch_xsts_token(
2026-01-27T08:49:40.5128203Z +  app: &AppHandle,
2026-01-27T08:49:40.5128444Z +  xbl_token: String,
2026-01-27T08:49:40.5128746Z +) -> DSYCLauncherResult<(String, String)> {
2026-01-27T08:49:40.5129112Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.5129397Z  
2026-01-27T08:49:40.5129576Z    let response = client
2026-01-27T08:49:40.5130232Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/microsoft/oauth.rs:206:
2026-01-27T08:49:40.5130780Z    )
2026-01-27T08:49:40.5130945Z  }
2026-01-27T08:49:40.5131101Z  
2026-01-27T08:49:40.5131674Z -pub async fn login(app: &AppHandle, auth_info: DeviceAuthResponseInfo) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5132235Z +pub async fn login(
2026-01-27T08:49:40.5132465Z +  app: &AppHandle,
2026-01-27T08:49:40.5132747Z +  auth_info: DeviceAuthResponseInfo,
2026-01-27T08:49:40.5133106Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5133486Z    let client = app.state::<reqwest::Client>();
2026-01-27T08:49:40.5133926Z    let sender = client.post(OAUTH_TOKEN_ENDPOINT).form(&[
2026-01-27T08:49:40.5134314Z      ("client_id", CLIENT_ID),
2026-01-27T08:49:40.5139167Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:11:
2026-01-27T08:49:40.5139957Z  use tauri::AppHandle;
2026-01-27T08:49:40.5140189Z  use uuid::Uuid;
2026-01-27T08:49:40.5140755Z  
2026-01-27T08:49:40.5141478Z -pub fn load_preset_skin(app: &AppHandle, preset_role: PresetRole) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.5142080Z +pub fn load_preset_skin(
2026-01-27T08:49:40.5142345Z +  app: &AppHandle,
2026-01-27T08:49:40.5142592Z +  preset_role: PresetRole,
2026-01-27T08:49:40.5142924Z +) -> DSYCLauncherResult<Vec<Texture>> {
2026-01-27T08:49:40.5143533Z    let texture_path = get_app_resource_filepath(app, &format!("assets/skins/{}.png", preset_role))
2026-01-27T08:49:40.5144124Z      .map_err(|_| AccountError::TextureError)?;
2026-01-27T08:49:40.5144393Z  
2026-01-27T08:49:40.5144903Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/helpers/offline/mod.rs:29:
2026-01-27T08:49:40.5145392Z    }])
2026-01-27T08:49:40.5145552Z  }
2026-01-27T08:49:40.5145701Z  
2026-01-27T08:49:40.5146233Z -pub async fn login(app: &AppHandle, username: String, raw_uuid: String) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5146756Z +pub async fn login(
2026-01-27T08:49:40.5146970Z +  app: &AppHandle,
2026-01-27T08:49:40.5147181Z +  username: String,
2026-01-27T08:49:40.5147382Z +  raw_uuid: String,
2026-01-27T08:49:40.5147643Z +) -> DSYCLauncherResult<PlayerInfo> {
2026-01-27T08:49:40.5148173Z    let name_with_prefix = format!("OfflinePlayer:{}", username);
2026-01-27T08:49:40.5148604Z    let uuid = if let Ok(id) = Uuid::parse_str(&raw_uuid) {
2026-01-27T08:49:40.5148904Z      id
2026-01-27T08:49:40.5258437Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/account/commands.rs:53:
2026-01-27T08:49:40.5259223Z  }
2026-01-27T08:49:40.5259411Z  
2026-01-27T08:49:40.5259612Z  #[tauri::command]
2026-01-27T08:49:40.5260301Z -pub async fn add_player_offline(app: AppHandle, username: String, uuid: String) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.5260964Z +pub async fn add_player_offline(
2026-01-27T08:49:40.5261273Z +  app: AppHandle,
2026-01-27T08:49:40.5261525Z +  username: String,
2026-01-27T08:49:40.5261775Z +  uuid: String,
2026-01-27T08:49:40.5262051Z +) -> DSYCLauncherResult<()> {
2026-01-27T08:49:40.5262484Z    let new_player = offline::login(&app, username, uuid).await?;
2026-01-27T08:49:40.5262856Z  
2026-01-27T08:49:40.5263172Z    let account_binding = app.state::<Mutex<AccountInfo>>();
2026-01-27T08:49:40.5329941Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:63:
2026-01-27T08:49:40.5331015Z  
2026-01-27T08:49:40.5331373Z  impl LaunchArguments {
2026-01-27T08:49:40.5332165Z    pub fn into_hashmap(self) -> DSYCLauncherResult<HashMap<String, String>> {
2026-01-27T08:49:40.5332939Z -    let value =
2026-01-27T08:49:40.5334079Z -      serde_json::to_value(self).map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5335117Z +    let value = serde_json::to_value(self)
2026-01-27T08:49:40.5335705Z +      .map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5336176Z      let obj = value
2026-01-27T08:49:40.5336436Z        .as_object()
2026-01-27T08:49:40.5337000Z        .ok_or_else(|| DSYCLauncherError("Failed to convert LaunchParams to HashMap".to_string()))?;
2026-01-27T08:49:40.5338283Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:338:
2026-01-27T08:49:40.5338928Z      }
2026-01-27T08:49:40.5339127Z  
2026-01-27T08:49:40.5339438Z      // Get library paths based on platform
2026-01-27T08:49:40.5339847Z -      let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5340152Z -      
2026-01-27T08:49:40.5340390Z -      // Add VC libs path
2026-01-27T08:49:40.5340723Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5341023Z -      {
2026-01-27T08:49:40.5341252Z -        use std::env;
2026-01-27T08:49:40.5341559Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5341966Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5342441Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5343245Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5344039Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x86");
2026-01-27T08:49:40.5344598Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5345135Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x64");
2026-01-27T08:49:40.5346023Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("windows").join(if cfg!(target_arch = "x86") { "x86" } else { "x64" });
2026-01-27T08:49:40.5346757Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5347238Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5347561Z -          }
2026-01-27T08:49:40.5347787Z +    let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5348287Z +
2026-01-27T08:49:40.5348465Z +    // Add VC libs path
2026-01-27T08:49:40.5348720Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5348941Z +    {
2026-01-27T08:49:40.5349127Z +      use std::env;
2026-01-27T08:49:40.5349363Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5349658Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5350002Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5350481Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5351039Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5351426Z +            .join("assets")
2026-01-27T08:49:40.5351750Z +            .join("vc-libs")
2026-01-27T08:49:40.5352130Z +            .join("windows")
2026-01-27T08:49:40.5352429Z +            .join("x86");
2026-01-27T08:49:40.5365028Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5365539Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5365825Z +            .join("assets")
2026-01-27T08:49:40.5366069Z +            .join("vc-libs")
2026-01-27T08:49:40.5366307Z +            .join("windows")
2026-01-27T08:49:40.5366547Z +            .join("x64");
2026-01-27T08:49:40.5366818Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5367080Z +            .join("assets")
2026-01-27T08:49:40.5367306Z +            .join("libs")
2026-01-27T08:49:40.5367522Z +            .join("natives")
2026-01-27T08:49:40.5367751Z +            .join("windows")
2026-01-27T08:49:40.5368189Z +            .join(if cfg!(target_arch = "x86") {
2026-01-27T08:49:40.5368453Z +              "x86"
2026-01-27T08:49:40.5368650Z +            } else {
2026-01-27T08:49:40.5368836Z +              "x64"
2026-01-27T08:49:40.5369009Z +            });
2026-01-27T08:49:40.5369337Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5369810Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5370134Z          }
2026-01-27T08:49:40.5370293Z        }
2026-01-27T08:49:40.5370496Z -      #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5370718Z -      {
2026-01-27T08:49:40.5370905Z -        use std::env;
2026-01-27T08:49:40.5371145Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5371464Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5371819Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5372080Z +    }
2026-01-27T08:49:40.5372276Z +    #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5372484Z +    {
2026-01-27T08:49:40.5372653Z +      use std::env;
2026-01-27T08:49:40.5372877Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5373178Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5373521Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5373865Z +          if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5374211Z              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5374578Z -              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5375212Z -                let vc_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("vc-libs").join("macos");
2026-01-27T08:49:40.5376473Z -                let common_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("libs").join("natives").join("macos");
2026-01-27T08:49:40.5377166Z -                lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5377661Z -                lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5378155Z -              }
2026-01-27T08:49:40.5378393Z +              let vc_libs_dir = app_dir
2026-01-27T08:49:40.5378675Z +                .join("Contents")
2026-01-27T08:49:40.5378943Z +                .join("Resources")
2026-01-27T08:49:40.5379199Z +                .join("assets")
2026-01-27T08:49:40.5379446Z +                .join("vc-libs")
2026-01-27T08:49:40.5379689Z +                .join("macos");
2026-01-27T08:49:40.5379959Z +              let common_libs_dir = app_dir
2026-01-27T08:49:40.5380237Z +                .join("Contents")
2026-01-27T08:49:40.5380495Z +                .join("Resources")
2026-01-27T08:49:40.5380756Z +                .join("assets")
2026-01-27T08:49:40.5380992Z +                .join("libs")
2026-01-27T08:49:40.5381233Z +                .join("natives")
2026-01-27T08:49:40.5381487Z +                .join("macos");
2026-01-27T08:49:40.5381839Z +              lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5382322Z +              lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5382653Z              }
2026-01-27T08:49:40.5382816Z            }
2026-01-27T08:49:40.5382976Z          }
2026-01-27T08:49:40.5383478Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:376:
2026-01-27T08:49:40.5383950Z        }
2026-01-27T08:49:40.5384149Z -      #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5384372Z -      {
2026-01-27T08:49:40.5384694Z -        use std::env;
2026-01-27T08:49:40.5385107Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5385645Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5386222Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5386698Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5387113Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5387664Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("x64");
2026-01-27T08:49:40.5388464Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5389026Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("arm64");
2026-01-27T08:49:40.5389619Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5390097Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5390418Z -          }
2026-01-27T08:49:40.5390573Z +    }
2026-01-27T08:49:40.5390774Z +    #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5390990Z +    {
2026-01-27T08:49:40.5391163Z +      use std::env;
2026-01-27T08:49:40.5391392Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5391683Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5392031Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5392479Z +          let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5392870Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5393164Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5393418Z +            .join("assets")
2026-01-27T08:49:40.5393634Z +            .join("libs")
2026-01-27T08:49:40.5393853Z +            .join("natives")
2026-01-27T08:49:40.5394076Z +            .join("linux")
2026-01-27T08:49:40.5394290Z +            .join("x64");
2026-01-27T08:49:40.5394544Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5394832Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5395291Z +            .join("assets")
2026-01-27T08:49:40.5395625Z +            .join("libs")
2026-01-27T08:49:40.5395841Z +            .join("natives")
2026-01-27T08:49:40.5396066Z +            .join("linux")
2026-01-27T08:49:40.5396277Z +            .join("arm64");
2026-01-27T08:49:40.5396634Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5397108Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5397425Z          }
2026-01-27T08:49:40.5397584Z        }
2026-01-27T08:49:40.5397794Z -      #[cfg(target_os = "android")]
2026-01-27T08:49:40.5398148Z -      {
2026-01-27T08:49:40.5398329Z -        use std::env;
2026-01-27T08:49:40.5398561Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5398869Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5399223Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5399576Z -            // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5399911Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5400215Z -            let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5400492Z -            #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5400783Z -            let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5401063Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5401338Z -            let arch_dir = "x86";
2026-01-27T08:49:40.5401614Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5401893Z -            let arch_dir = "x86_64";
2026-01-27T08:49:40.5402115Z -            
2026-01-27T08:49:40.5402537Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("android").join(arch_dir);
2026-01-27T08:49:40.5403268Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("android").join(arch_dir);
2026-01-27T08:49:40.5403884Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5404353Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5404681Z -          }
2026-01-27T08:49:40.5404843Z +    }
2026-01-27T08:49:40.5405042Z +    #[cfg(target_os = "android")]
2026-01-27T08:49:40.5405254Z +    {
2026-01-27T08:49:40.5405415Z +      use std::env;
2026-01-27T08:49:40.5405643Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5405951Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5406302Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5406659Z +          // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5406982Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5407267Z +          let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5407546Z +          #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5407819Z +          let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5408365Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5408634Z +          let arch_dir = "x86";
2026-01-27T08:49:40.5408902Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5409185Z +          let arch_dir = "x86_64";
2026-01-27T08:49:40.5409404Z +
2026-01-27T08:49:40.5409599Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5409845Z +            .join("assets")
2026-01-27T08:49:40.5410067Z +            .join("vc-libs")
2026-01-27T08:49:40.5410289Z +            .join("android")
2026-01-27T08:49:40.5410512Z +            .join(arch_dir);
2026-01-27T08:49:40.5410762Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5411014Z +            .join("assets")
2026-01-27T08:49:40.5411223Z +            .join("libs")
2026-01-27T08:49:40.5411433Z +            .join("natives")
2026-01-27T08:49:40.5411650Z +            .join("android")
2026-01-27T08:49:40.5411858Z +            .join(arch_dir);
2026-01-27T08:49:40.5412206Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5412677Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5413219Z          }
2026-01-27T08:49:40.5413376Z        }
2026-01-27T08:49:40.5413520Z -      
2026-01-27T08:49:40.5413906Z -      // Combine natives directory and all library paths
2026-01-27T08:49:40.5414355Z -      let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5414665Z -      
2026-01-27T08:49:40.5414871Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5415120Z -      let separator = ";";
2026-01-27T08:49:40.5415388Z -      #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5415649Z -      let separator = ":";
2026-01-27T08:49:40.5415840Z -      
2026-01-27T08:49:40.5416044Z -      for lib_path in lib_paths {
2026-01-27T08:49:40.5416314Z -        if !lib_path.is_empty() {
2026-01-27T08:49:40.5416712Z -          java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5417045Z -        }
2026-01-27T08:49:40.5417194Z +    }
2026-01-27T08:49:40.5417346Z +
2026-01-27T08:49:40.5417602Z +    // Combine natives directory and all library paths
2026-01-27T08:49:40.5418147Z +    let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5418455Z +
2026-01-27T08:49:40.5418644Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5418885Z +    let separator = ";";
2026-01-27T08:49:40.5419136Z +    #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5419385Z +    let separator = ":";
2026-01-27T08:49:40.5419571Z +
2026-01-27T08:49:40.5419763Z +    for lib_path in lib_paths {
2026-01-27T08:49:40.5420020Z +      if !lib_path.is_empty() {
2026-01-27T08:49:40.5420404Z +        java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5420727Z        }
2026-01-27T08:49:40.5420877Z -      
2026-01-27T08:49:40.5421078Z -      client_jvm_args.extend(vec![
2026-01-27T08:49:40.5421437Z -        format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5421886Z -        "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5422358Z -        "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5422687Z -      ]);
2026-01-27T08:49:40.5422846Z +    }
2026-01-27T08:49:40.5422992Z +
2026-01-27T08:49:40.5423188Z +    client_jvm_args.extend(vec![
2026-01-27T08:49:40.5423526Z +      format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5423956Z +      "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5424433Z +      "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5424752Z +    ]);
2026-01-27T08:49:40.5425007Z      cmd.extend(replace_arguments(client_jvm_args, &map));
2026-01-27T08:49:40.5425289Z    }
2026-01-27T08:49:40.5425427Z  
2026-01-27T08:49:40.5425947Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/file_validator.rs:207:
2026-01-27T08:49:40.5426404Z    })
2026-01-27T08:49:40.5426552Z  }
2026-01-27T08:49:40.5426695Z  
2026-01-27T08:49:40.5427147Z -pub fn convert_library_name_to_path(name: &str, native: Option<String>) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5427662Z +pub fn convert_library_name_to_path(
2026-01-27T08:49:40.5428100Z +  name: &str,
2026-01-27T08:49:40.5428336Z +  native: Option<String>,
2026-01-27T08:49:40.5428604Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5428839Z    let LibraryParts {
2026-01-27T08:49:40.5429033Z      path,
2026-01-27T08:49:40.5429197Z      pack_name,
2026-01-27T08:49:40.5508579Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:63:
2026-01-27T08:49:40.5509709Z  
2026-01-27T08:49:40.5510060Z  impl LaunchArguments {
2026-01-27T08:49:40.5510857Z    pub fn into_hashmap(self) -> DSYCLauncherResult<HashMap<String, String>> {
2026-01-27T08:49:40.5511605Z -    let value =
2026-01-27T08:49:40.5512700Z -      serde_json::to_value(self).map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5513378Z +    let value = serde_json::to_value(self)
2026-01-27T08:49:40.5513961Z +      .map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5514792Z      let obj = value
2026-01-27T08:49:40.5514984Z        .as_object()
2026-01-27T08:49:40.5515411Z        .ok_or_else(|| DSYCLauncherError("Failed to convert LaunchParams to HashMap".to_string()))?;
2026-01-27T08:49:40.5516204Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:338:
2026-01-27T08:49:40.5516677Z      }
2026-01-27T08:49:40.5516830Z  
2026-01-27T08:49:40.5517031Z      // Get library paths based on platform
2026-01-27T08:49:40.5517346Z -      let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5517583Z -      
2026-01-27T08:49:40.5517760Z -      // Add VC libs path
2026-01-27T08:49:40.5518357Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5518591Z -      {
2026-01-27T08:49:40.5518763Z -        use std::env;
2026-01-27T08:49:40.5519006Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5519314Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5519700Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5520028Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5520527Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x86");
2026-01-27T08:49:40.5520987Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5521469Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x64");
2026-01-27T08:49:40.5522375Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("windows").join(if cfg!(target_arch = "x86") { "x86" } else { "x64" });
2026-01-27T08:49:40.5523119Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5523603Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5523930Z -          }
2026-01-27T08:49:40.5524153Z +    let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5524380Z +
2026-01-27T08:49:40.5524556Z +    // Add VC libs path
2026-01-27T08:49:40.5524807Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5525017Z +    {
2026-01-27T08:49:40.5525185Z +      use std::env;
2026-01-27T08:49:40.5525408Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5525703Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5526047Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5526350Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5526620Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5526861Z +            .join("assets")
2026-01-27T08:49:40.5527088Z +            .join("vc-libs")
2026-01-27T08:49:40.5527310Z +            .join("windows")
2026-01-27T08:49:40.5527520Z +            .join("x86");
2026-01-27T08:49:40.5527772Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5528185Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5528420Z +            .join("assets")
2026-01-27T08:49:40.5528641Z +            .join("vc-libs")
2026-01-27T08:49:40.5528852Z +            .join("windows")
2026-01-27T08:49:40.5529070Z +            .join("x64");
2026-01-27T08:49:40.5529321Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5529576Z +            .join("assets")
2026-01-27T08:49:40.5529791Z +            .join("libs")
2026-01-27T08:49:40.5529997Z +            .join("natives")
2026-01-27T08:49:40.5530215Z +            .join("windows")
2026-01-27T08:49:40.5530488Z +            .join(if cfg!(target_arch = "x86") {
2026-01-27T08:49:40.5530742Z +              "x86"
2026-01-27T08:49:40.5530929Z +            } else {
2026-01-27T08:49:40.5531110Z +              "x64"
2026-01-27T08:49:40.5531282Z +            });
2026-01-27T08:49:40.5531604Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5532070Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5532385Z          }
2026-01-27T08:49:40.5532539Z        }
2026-01-27T08:49:40.5532901Z -      #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5533117Z -      {
2026-01-27T08:49:40.5533405Z -        use std::env;
2026-01-27T08:49:40.5533646Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5533956Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5534313Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5534567Z +    }
2026-01-27T08:49:40.5534761Z +    #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5534959Z +    {
2026-01-27T08:49:40.5535130Z +      use std::env;
2026-01-27T08:49:40.5535356Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5535648Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5535985Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5536325Z +          if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5536643Z              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5537005Z -              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5537630Z -                let vc_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("vc-libs").join("macos");
2026-01-27T08:49:40.5538640Z -                let common_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("libs").join("natives").join("macos");
2026-01-27T08:49:40.5539313Z -                lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5539792Z -                lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5540115Z -              }
2026-01-27T08:49:40.5540341Z +              let vc_libs_dir = app_dir
2026-01-27T08:49:40.5540612Z +                .join("Contents")
2026-01-27T08:49:40.5540874Z +                .join("Resources")
2026-01-27T08:49:40.5541133Z +                .join("assets")
2026-01-27T08:49:40.5541374Z +                .join("vc-libs")
2026-01-27T08:49:40.5541625Z +                .join("macos");
2026-01-27T08:49:40.5541887Z +              let common_libs_dir = app_dir
2026-01-27T08:49:40.5542174Z +                .join("Contents")
2026-01-27T08:49:40.5542434Z +                .join("Resources")
2026-01-27T08:49:40.5542681Z +                .join("assets")
2026-01-27T08:49:40.5542918Z +                .join("libs")
2026-01-27T08:49:40.5543151Z +                .join("natives")
2026-01-27T08:49:40.5543401Z +                .join("macos");
2026-01-27T08:49:40.5543758Z +              lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5544231Z +              lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5544557Z              }
2026-01-27T08:49:40.5544720Z            }
2026-01-27T08:49:40.5544871Z          }
2026-01-27T08:49:40.5545379Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:376:
2026-01-27T08:49:40.5545842Z        }
2026-01-27T08:49:40.5546045Z -      #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5546258Z -      {
2026-01-27T08:49:40.5546429Z -        use std::env;
2026-01-27T08:49:40.5546664Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5546967Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5547324Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5547775Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5548294Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5548858Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("x64");
2026-01-27T08:49:40.5549379Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5549936Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("arm64");
2026-01-27T08:49:40.5550540Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5551021Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5551510Z -          }
2026-01-27T08:49:40.5551672Z +    }
2026-01-27T08:49:40.5551981Z +    #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5552193Z +    {
2026-01-27T08:49:40.5552364Z +      use std::env;
2026-01-27T08:49:40.5552593Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5552896Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5553249Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5553697Z +          let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5554099Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5554424Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5554685Z +            .join("assets")
2026-01-27T08:49:40.5554975Z +            .join("libs")
2026-01-27T08:49:40.5555376Z +            .join("natives")
2026-01-27T08:49:40.5555765Z +            .join("linux")
2026-01-27T08:49:40.5556127Z +            .join("x64");
2026-01-27T08:49:40.5556574Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5557096Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5557533Z +            .join("assets")
2026-01-27T08:49:40.5558114Z +            .join("libs")
2026-01-27T08:49:40.5558494Z +            .join("natives")
2026-01-27T08:49:40.5558772Z +            .join("linux")
2026-01-27T08:49:40.5558988Z +            .join("arm64");
2026-01-27T08:49:40.5559334Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5559803Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5560123Z          }
2026-01-27T08:49:40.5560272Z        }
2026-01-27T08:49:40.5560473Z -      #[cfg(target_os = "android")]
2026-01-27T08:49:40.5560691Z -      {
2026-01-27T08:49:40.5560868Z -        use std::env;
2026-01-27T08:49:40.5561110Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5561410Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5561762Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5562131Z -            // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5562449Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5562744Z -            let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5563041Z -            #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5563335Z -            let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5563625Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5563893Z -            let arch_dir = "x86";
2026-01-27T08:49:40.5564168Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5564444Z -            let arch_dir = "x86_64";
2026-01-27T08:49:40.5564664Z -            
2026-01-27T08:49:40.5565095Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("android").join(arch_dir);
2026-01-27T08:49:40.5565817Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("android").join(arch_dir);
2026-01-27T08:49:40.5566423Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5566915Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5567230Z -          }
2026-01-27T08:49:40.5567390Z +    }
2026-01-27T08:49:40.5567591Z +    #[cfg(target_os = "android")]
2026-01-27T08:49:40.5567805Z +    {
2026-01-27T08:49:40.5568216Z +      use std::env;
2026-01-27T08:49:40.5568449Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5568748Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5569084Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5569433Z +          // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5569750Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5570028Z +          let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5570302Z +          #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5570582Z +          let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5570852Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5571318Z +          let arch_dir = "x86";
2026-01-27T08:49:40.5571698Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5571985Z +          let arch_dir = "x86_64";
2026-01-27T08:49:40.5572198Z +
2026-01-27T08:49:40.5572393Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5572638Z +            .join("assets")
2026-01-27T08:49:40.5572860Z +            .join("vc-libs")
2026-01-27T08:49:40.5573085Z +            .join("android")
2026-01-27T08:49:40.5573303Z +            .join(arch_dir);
2026-01-27T08:49:40.5573554Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5573807Z +            .join("assets")
2026-01-27T08:49:40.5574022Z +            .join("libs")
2026-01-27T08:49:40.5574230Z +            .join("natives")
2026-01-27T08:49:40.5574456Z +            .join("android")
2026-01-27T08:49:40.5574663Z +            .join(arch_dir);
2026-01-27T08:49:40.5575006Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5575478Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5575791Z          }
2026-01-27T08:49:40.5575945Z        }
2026-01-27T08:49:40.5576091Z -      
2026-01-27T08:49:40.5576360Z -      // Combine natives directory and all library paths
2026-01-27T08:49:40.5576794Z -      let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5577096Z -      
2026-01-27T08:49:40.5577298Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5577547Z -      let separator = ";";
2026-01-27T08:49:40.5577802Z -      #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5578326Z -      let separator = ":";
2026-01-27T08:49:40.5578519Z -      
2026-01-27T08:49:40.5578724Z -      for lib_path in lib_paths {
2026-01-27T08:49:40.5578990Z -        if !lib_path.is_empty() {
2026-01-27T08:49:40.5579379Z -          java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5579710Z -        }
2026-01-27T08:49:40.5579857Z +    }
2026-01-27T08:49:40.5580010Z +
2026-01-27T08:49:40.5580271Z +    // Combine natives directory and all library paths
2026-01-27T08:49:40.5580684Z +    let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5580985Z +
2026-01-27T08:49:40.5581172Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5581410Z +    let separator = ";";
2026-01-27T08:49:40.5581662Z +    #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5581910Z +    let separator = ":";
2026-01-27T08:49:40.5582096Z +
2026-01-27T08:49:40.5582289Z +    for lib_path in lib_paths {
2026-01-27T08:49:40.5582544Z +      if !lib_path.is_empty() {
2026-01-27T08:49:40.5582926Z +        java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5583245Z        }
2026-01-27T08:49:40.5583394Z -      
2026-01-27T08:49:40.5583595Z -      client_jvm_args.extend(vec![
2026-01-27T08:49:40.5583943Z -        format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5584393Z -        "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5584884Z -        "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5585204Z -      ]);
2026-01-27T08:49:40.5585359Z +    }
2026-01-27T08:49:40.5585498Z +
2026-01-27T08:49:40.5585692Z +    client_jvm_args.extend(vec![
2026-01-27T08:49:40.5586034Z +      format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5586462Z +      "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5586933Z +      "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5587247Z +    ]);
2026-01-27T08:49:40.5587497Z      cmd.extend(replace_arguments(client_jvm_args, &map));
2026-01-27T08:49:40.5587772Z    }
2026-01-27T08:49:40.5588052Z  
2026-01-27T08:49:40.5589090Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/file_validator.rs:207:
2026-01-27T08:49:40.5589647Z    })
2026-01-27T08:49:40.5589892Z  }
2026-01-27T08:49:40.5590215Z  
2026-01-27T08:49:40.5591113Z -pub fn convert_library_name_to_path(name: &str, native: Option<String>) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5591774Z +pub fn convert_library_name_to_path(
2026-01-27T08:49:40.5592030Z +  name: &str,
2026-01-27T08:49:40.5592224Z +  native: Option<String>,
2026-01-27T08:49:40.5592489Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5592726Z    let LibraryParts {
2026-01-27T08:49:40.5593000Z      path,
2026-01-27T08:49:40.5593248Z      pack_name,
2026-01-27T08:49:40.5804920Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:63:
2026-01-27T08:49:40.5805970Z  
2026-01-27T08:49:40.5806297Z  impl LaunchArguments {
2026-01-27T08:49:40.5807005Z    pub fn into_hashmap(self) -> DSYCLauncherResult<HashMap<String, String>> {
2026-01-27T08:49:40.5807672Z -    let value =
2026-01-27T08:49:40.5808863Z -      serde_json::to_value(self).map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5809911Z +    let value = serde_json::to_value(self)
2026-01-27T08:49:40.5810751Z +      .map_err(|e| DSYCLauncherError(format!("Serialization error: {}", e)))?;
2026-01-27T08:49:40.5811415Z      let obj = value
2026-01-27T08:49:40.5811752Z        .as_object()
2026-01-27T08:49:40.5812499Z        .ok_or_else(|| DSYCLauncherError("Failed to convert LaunchParams to HashMap".to_string()))?;
2026-01-27T08:49:40.5813959Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:338:
2026-01-27T08:49:40.5814836Z      }
2026-01-27T08:49:40.5815123Z  
2026-01-27T08:49:40.5815509Z      // Get library paths based on platform
2026-01-27T08:49:40.5816117Z -      let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5816563Z -      
2026-01-27T08:49:40.5816908Z -      // Add VC libs path
2026-01-27T08:49:40.5817398Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5817820Z -      {
2026-01-27T08:49:40.5818422Z -        use std::env;
2026-01-27T08:49:40.5818913Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5819536Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5820233Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5820805Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5821664Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x86");
2026-01-27T08:49:40.5822535Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5823481Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("windows").join("x64");
2026-01-27T08:49:40.5825165Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("windows").join(if cfg!(target_arch = "x86") { "x86" } else { "x64" });
2026-01-27T08:49:40.5826600Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5827494Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5828338Z -          }
2026-01-27T08:49:40.5828765Z +    let mut lib_paths = Vec::new();
2026-01-27T08:49:40.5829188Z +
2026-01-27T08:49:40.5829484Z +    // Add VC libs path
2026-01-27T08:49:40.5829918Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5830276Z +    {
2026-01-27T08:49:40.5830575Z +      use std::env;
2026-01-27T08:49:40.5830977Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5831512Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5832142Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5832683Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5833183Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5833624Z +            .join("assets")
2026-01-27T08:49:40.5834025Z +            .join("vc-libs")
2026-01-27T08:49:40.5834429Z +            .join("windows")
2026-01-27T08:49:40.5834836Z +            .join("x86");
2026-01-27T08:49:40.5835289Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5835823Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5836740Z +            .join("assets")
2026-01-27T08:49:40.5837408Z +            .join("vc-libs")
2026-01-27T08:49:40.5837837Z +            .join("windows")
2026-01-27T08:49:40.5838439Z +            .join("x64");
2026-01-27T08:49:40.5838918Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5839392Z +            .join("assets")
2026-01-27T08:49:40.5839791Z +            .join("libs")
2026-01-27T08:49:40.5840189Z +            .join("natives")
2026-01-27T08:49:40.5840588Z +            .join("windows")
2026-01-27T08:49:40.5841093Z +            .join(if cfg!(target_arch = "x86") {
2026-01-27T08:49:40.5841564Z +              "x86"
2026-01-27T08:49:40.5841900Z +            } else {
2026-01-27T08:49:40.5842228Z +              "x64"
2026-01-27T08:49:40.5842532Z +            });
2026-01-27T08:49:40.5843122Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5843996Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5844580Z          }
2026-01-27T08:49:40.5844854Z        }
2026-01-27T08:49:40.5845228Z -      #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5845680Z -      {
2026-01-27T08:49:40.5846014Z -        use std::env;
2026-01-27T08:49:40.5846457Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5847046Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5847742Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5848460Z +    }
2026-01-27T08:49:40.5848837Z +    #[cfg(target_os = "macos")]
2026-01-27T08:49:40.5849221Z +    {
2026-01-27T08:49:40.5849531Z +      use std::env;
2026-01-27T08:49:40.5849935Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5850480Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5851123Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5851751Z +          if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5852349Z              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5853024Z -              if let Some(app_dir) = app_dir.parent() {
2026-01-27T08:49:40.5854177Z -                let vc_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("vc-libs").join("macos");
2026-01-27T08:49:40.5855850Z -                let common_libs_dir = app_dir.join("Contents").join("Resources").join("assets").join("libs").join("natives").join("macos");
2026-01-27T08:49:40.5857138Z -                lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5858314Z -                lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5858941Z -              }
2026-01-27T08:49:40.5859381Z +              let vc_libs_dir = app_dir
2026-01-27T08:49:40.5859843Z +                .join("Contents")
2026-01-27T08:49:40.5860335Z +                .join("Resources")
2026-01-27T08:49:40.5860819Z +                .join("assets")
2026-01-27T08:49:40.5861333Z +                .join("vc-libs")
2026-01-27T08:49:40.5861828Z +                .join("macos");
2026-01-27T08:49:40.5862332Z +              let common_libs_dir = app_dir
2026-01-27T08:49:40.5862859Z +                .join("Contents")
2026-01-27T08:49:40.5863334Z +                .join("Resources")
2026-01-27T08:49:40.5863797Z +                .join("assets")
2026-01-27T08:49:40.5864232Z +                .join("libs")
2026-01-27T08:49:40.5864664Z +                .join("natives")
2026-01-27T08:49:40.5865113Z +                .join("macos");
2026-01-27T08:49:40.5865792Z +              lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5866684Z +              lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5866814Z              }
2026-01-27T08:49:40.5866931Z            }
2026-01-27T08:49:40.5867042Z          }
2026-01-27T08:49:40.5867814Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/command_generator.rs:376:
2026-01-27T08:49:40.5868173Z        }
2026-01-27T08:49:40.5868709Z -      #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5868830Z -      {
2026-01-27T08:49:40.5869172Z -        use std::env;
2026-01-27T08:49:40.5869411Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5869729Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5870032Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5870526Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5870781Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5871491Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("x64");
2026-01-27T08:49:40.5871751Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5872501Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("linux").join("arm64");
2026-01-27T08:49:40.5872927Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5873383Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5873514Z -          }
2026-01-27T08:49:40.5873629Z +    }
2026-01-27T08:49:40.5873845Z +    #[cfg(target_os = "linux")]
2026-01-27T08:49:40.5873958Z +    {
2026-01-27T08:49:40.5874115Z +      use std::env;
2026-01-27T08:49:40.5874344Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5874642Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5874941Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5875415Z +          let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("linux");
2026-01-27T08:49:40.5875650Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5875885Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5876060Z +            .join("assets")
2026-01-27T08:49:40.5876225Z +            .join("libs")
2026-01-27T08:49:40.5876405Z +            .join("natives")
2026-01-27T08:49:40.5876575Z +            .join("linux")
2026-01-27T08:49:40.5876753Z +            .join("x64");
2026-01-27T08:49:40.5877022Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5877266Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5877436Z +            .join("assets")
2026-01-27T08:49:40.5877604Z +            .join("libs")
2026-01-27T08:49:40.5877769Z +            .join("natives")
2026-01-27T08:49:40.5878166Z +            .join("linux")
2026-01-27T08:49:40.5878354Z +            .join("arm64");
2026-01-27T08:49:40.5878780Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5879247Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5879381Z          }
2026-01-27T08:49:40.5879502Z        }
2026-01-27T08:49:40.5879733Z -      #[cfg(target_os = "android")]
2026-01-27T08:49:40.5879853Z -      {
2026-01-27T08:49:40.5880021Z -        use std::env;
2026-01-27T08:49:40.5880254Z -        use std::path::PathBuf;
2026-01-27T08:49:40.5880555Z -        if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5880864Z -          if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5881190Z -            // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5881447Z -            #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5881698Z -            let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5881927Z -            #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5882174Z -            let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5882417Z -            #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5882629Z -            let arch_dir = "x86";
2026-01-27T08:49:40.5882877Z -            #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5883116Z -            let arch_dir = "x86_64";
2026-01-27T08:49:40.5883239Z -            
2026-01-27T08:49:40.5883860Z -            let vc_libs_dir = app_dir.join("assets").join("vc-libs").join("android").join(arch_dir);
2026-01-27T08:49:40.5884638Z -            let common_libs_dir = app_dir.join("assets").join("libs").join("natives").join("android").join(arch_dir);
2026-01-27T08:49:40.5885571Z -            lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5886034Z -            lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5886163Z -          }
2026-01-27T08:49:40.5886282Z +    }
2026-01-27T08:49:40.5886518Z +    #[cfg(target_os = "android")]
2026-01-27T08:49:40.5886634Z +    {
2026-01-27T08:49:40.5886796Z +      use std::env;
2026-01-27T08:49:40.5887015Z +      use std::path::PathBuf;
2026-01-27T08:49:40.5887295Z +      if let Ok(exe_path) = env::current_exe() {
2026-01-27T08:49:40.5887583Z +        if let Some(app_dir) = exe_path.parent() {
2026-01-27T08:49:40.5888087Z +          // Android app structure: app/lib/[arch]/
2026-01-27T08:49:40.5888339Z +          #[cfg(target_arch = "aarch64")]
2026-01-27T08:49:40.5888570Z +          let arch_dir = "arm64-v8a";
2026-01-27T08:49:40.5888804Z +          #[cfg(target_arch = "arm")]
2026-01-27T08:49:40.5889045Z +          let arch_dir = "armeabi-v7a";
2026-01-27T08:49:40.5889277Z +          #[cfg(target_arch = "x86")]
2026-01-27T08:49:40.5889481Z +          let arch_dir = "x86";
2026-01-27T08:49:40.5889712Z +          #[cfg(target_arch = "x86_64")]
2026-01-27T08:49:40.5889924Z +          let arch_dir = "x86_64";
2026-01-27T08:49:40.5890041Z +
2026-01-27T08:49:40.5890258Z +          let vc_libs_dir = app_dir
2026-01-27T08:49:40.5890448Z +            .join("assets")
2026-01-27T08:49:40.5890614Z +            .join("vc-libs")
2026-01-27T08:49:40.5890773Z +            .join("android")
2026-01-27T08:49:40.5890938Z +            .join(arch_dir);
2026-01-27T08:49:40.5891178Z +          let common_libs_dir = app_dir
2026-01-27T08:49:40.5891338Z +            .join("assets")
2026-01-27T08:49:40.5891506Z +            .join("libs")
2026-01-27T08:49:40.5891671Z +            .join("natives")
2026-01-27T08:49:40.5891841Z +            .join("android")
2026-01-27T08:49:40.5892003Z +            .join(arch_dir);
2026-01-27T08:49:40.5892473Z +          lib_paths.push(vc_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5892934Z +          lib_paths.push(common_libs_dir.to_string_lossy().to_string());
2026-01-27T08:49:40.5893063Z          }
2026-01-27T08:49:40.5893177Z        }
2026-01-27T08:49:40.5893295Z -      
2026-01-27T08:49:40.5893643Z -      // Combine natives directory and all library paths
2026-01-27T08:49:40.5894063Z -      let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5894194Z -      
2026-01-27T08:49:40.5894424Z -      #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5894606Z -      let separator = ";";
2026-01-27T08:49:40.5894860Z -      #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5895036Z -      let separator = ":";
2026-01-27T08:49:40.5895164Z -      
2026-01-27T08:49:40.5895390Z -      for lib_path in lib_paths {
2026-01-27T08:49:40.5895604Z -        if !lib_path.is_empty() {
2026-01-27T08:49:40.5896090Z -          java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5896223Z -        }
2026-01-27T08:49:40.5896345Z +    }
2026-01-27T08:49:40.5896463Z +
2026-01-27T08:49:40.5896790Z +    // Combine natives directory and all library paths
2026-01-27T08:49:40.5897203Z +    let mut java_library_path = "${natives_directory}".to_string();
2026-01-27T08:49:40.5897326Z +
2026-01-27T08:49:40.5897548Z +    #[cfg(target_os = "windows")]
2026-01-27T08:49:40.5897716Z +    let separator = ";";
2026-01-27T08:49:40.5898187Z +    #[cfg(not(target_os = "windows"))]
2026-01-27T08:49:40.5898364Z +    let separator = ":";
2026-01-27T08:49:40.5898477Z +
2026-01-27T08:49:40.5898702Z +    for lib_path in lib_paths {
2026-01-27T08:49:40.5898916Z +      if !lib_path.is_empty() {
2026-01-27T08:49:40.5899389Z +        java_library_path.push_str(&format!("{}{}", separator, lib_path));
2026-01-27T08:49:40.5899507Z        }
2026-01-27T08:49:40.5899622Z -      
2026-01-27T08:49:40.5899855Z -      client_jvm_args.extend(vec![
2026-01-27T08:49:40.5900235Z -        format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5901098Z -        "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5901582Z -        "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5901703Z -      ]);
2026-01-27T08:49:40.5901821Z +    }
2026-01-27T08:49:40.5901938Z +
2026-01-27T08:49:40.5902162Z +    client_jvm_args.extend(vec![
2026-01-27T08:49:40.5902528Z +      format!("-Djava.library.path={}", java_library_path),
2026-01-27T08:49:40.5902957Z +      "-Dminecraft.launcher.brand=${launcher_name}".to_string(),
2026-01-27T08:49:40.5903405Z +      "-Dminecraft.launcher.version=${launcher_version}".to_string(),
2026-01-27T08:49:40.5903531Z +    ]);
2026-01-27T08:49:40.5903833Z      cmd.extend(replace_arguments(client_jvm_args, &map));
2026-01-27T08:49:40.5903945Z    }
2026-01-27T08:49:40.5904054Z  
2026-01-27T08:49:40.5904860Z Diff in /home/runner/work/DSYC-Launcher/DSYC-Launcher/src-tauri/src/launch/helpers/file_validator.rs:207:
2026-01-27T08:49:40.5905005Z    })
2026-01-27T08:49:40.5905132Z  }
2026-01-27T08:49:40.5905251Z  
2026-01-27T08:49:40.5905995Z -pub fn convert_library_name_to_path(name: &str, native: Option<String>) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5906257Z +pub fn convert_library_name_to_path(
2026-01-27T08:49:40.5906383Z +  name: &str,
2026-01-27T08:49:40.5906552Z +  native: Option<String>,
2026-01-27T08:49:40.5906788Z +) -> DSYCLauncherResult<String> {
2026-01-27T08:49:40.5906927Z    let LibraryParts {
2026-01-27T08:49:40.5907045Z      path,
2026-01-27T08:49:40.5907179Z      pack_name,
2026-01-27T08:49:40.6021146Z ##[error]Process completed with exit code 123.
2026-01-27T08:49:40.6093293Z Post job cleanup.
2026-01-27T08:49:40.7092600Z [command]/usr/bin/git version
2026-01-27T08:49:40.7129774Z git version 2.52.0
2026-01-27T08:49:40.7175072Z Temporarily overriding HOME='/home/runner/work/_temp/b2b8f9e5-257b-4789-bf03-d19a2ede044e' before making global git config changes
2026-01-27T08:49:40.7175718Z Adding repository directory to the temporary git global config as a safe directory
2026-01-27T08:49:40.7190009Z [command]/usr/bin/git config --global --add safe.directory /home/runner/work/DSYC-Launcher/DSYC-Launcher
2026-01-27T08:49:40.7227374Z [command]/usr/bin/git config --local --name-only --get-regexp core\.sshCommand
2026-01-27T08:49:40.7262219Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'core\.sshCommand' && git config --local --unset-all 'core.sshCommand' || :"
2026-01-27T08:49:40.7501905Z [command]/usr/bin/git config --local --name-only --get-regexp http\.https\:\/\/github\.com\/\.extraheader
2026-01-27T08:49:40.7524297Z http.https://github.com/.extraheader
2026-01-27T08:49:40.7537456Z [command]/usr/bin/git config --local --unset-all http.https://github.com/.extraheader
2026-01-27T08:49:40.7569909Z [command]/usr/bin/git submodule foreach --recursive sh -c "git config --local --name-only --get-regexp 'http\.https\:\/\/github\.com\/\.extraheader' && git config --local --unset-all 'http.https://github.com/.extraheader' || :"
2026-01-27T08:49:40.7801444Z [command]/usr/bin/git config --local --name-only --get-regexp ^includeIf\.gitdir:
2026-01-27T08:49:40.7833595Z [command]/usr/bin/git submodule foreach --recursive git config --local --show-origin --name-only --get-regexp remote.origin.url
2026-01-27T08:49:40.8170998Z Cleaning up orphan processes
